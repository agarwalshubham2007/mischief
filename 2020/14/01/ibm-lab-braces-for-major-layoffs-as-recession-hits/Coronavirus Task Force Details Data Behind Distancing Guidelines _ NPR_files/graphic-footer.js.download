/*! modernizr 3.5.0 (Custom Build) | MIT *
 * https://modernizr.com/download/?-touchevents-setclasses !*/
!function(e,n,t){function o(e,n){return typeof e===n}function s(){var e,n,t,s,a,i,r;for(var l in c)if(c.hasOwnProperty(l)){if(e=[],n=c[l],n.name&&(e.push(n.name.toLowerCase()),n.options&&n.options.aliases&&n.options.aliases.length))for(t=0;t<n.options.aliases.length;t++)e.push(n.options.aliases[t].toLowerCase());for(s=o(n.fn,"function")?n.fn():n.fn,a=0;a<e.length;a++)i=e[a],r=i.split("."),1===r.length?Modernizr[r[0]]=s:(!Modernizr[r[0]]||Modernizr[r[0]]instanceof Boolean||(Modernizr[r[0]]=new Boolean(Modernizr[r[0]])),Modernizr[r[0]][r[1]]=s),f.push((s?"":"no-")+r.join("-"))}}function a(e){var n=u.className,t=Modernizr._config.classPrefix||"";if(p&&(n=n.baseVal),Modernizr._config.enableJSClass){var o=new RegExp("(^|\\s)"+t+"no-js(\\s|$)");n=n.replace(o,"$1"+t+"js$2")}Modernizr._config.enableClasses&&(n+=" "+t+e.join(" "+t),p?u.className.baseVal=n:u.className=n)}function i(){return"function"!=typeof n.createElement?n.createElement(arguments[0]):p?n.createElementNS.call(n,"http://www.w3.org/2000/svg",arguments[0]):n.createElement.apply(n,arguments)}function r(){var e=n.body;return e||(e=i(p?"svg":"body"),e.fake=!0),e}function l(e,t,o,s){var a,l,f,c,d="modernizr",p=i("div"),h=r();if(parseInt(o,10))for(;o--;)f=i("div"),f.id=s?s[o]:d+(o+1),p.appendChild(f);return a=i("style"),a.type="text/css",a.id="s"+d,(h.fake?h:p).appendChild(a),h.appendChild(p),a.styleSheet?a.styleSheet.cssText=e:a.appendChild(n.createTextNode(e)),p.id=d,h.fake&&(h.style.background="",h.style.overflow="hidden",c=u.style.overflow,u.style.overflow="hidden",u.appendChild(h)),l=t(p,e),h.fake?(h.parentNode.removeChild(h),u.style.overflow=c,u.offsetHeight):p.parentNode.removeChild(p),!!l}var f=[],c=[],d={_version:"3.5.0",_config:{classPrefix:"",enableClasses:!0,enableJSClass:!0,usePrefixes:!0},_q:[],on:function(e,n){var t=this;setTimeout(function(){n(t[e])},0)},addTest:function(e,n,t){c.push({name:e,fn:n,options:t})},addAsyncTest:function(e){c.push({name:null,fn:e})}},Modernizr=function(){};Modernizr.prototype=d,Modernizr=new Modernizr;var u=n.documentElement,p="svg"===u.nodeName.toLowerCase(),h=d._config.usePrefixes?" -webkit- -moz- -o- -ms- ".split(" "):["",""];d._prefixes=h;var m=d.testStyles=l;Modernizr.addTest("touchevents",function(){var t;if("ontouchstart"in e||e.DocumentTouch&&n instanceof DocumentTouch)t=!0;else{var o=["@media (",h.join("touch-enabled),("),"heartz",")","{#modernizr{top:9px;position:absolute}}"].join("");m(o,function(e){t=9===e.offsetTop})}return t}),s(),a(f),delete d.addTest,delete d.addAsyncTest;for(var v=0;v<Modernizr._q.length;v++)Modernizr._q[v]();e.Modernizr=Modernizr}(window,document);
(function(){var root=this;var previousUnderscore=root._;var ArrayProto=Array.prototype,ObjProto=Object.prototype,FuncProto=Function.prototype;var push=ArrayProto.push,slice=ArrayProto.slice,toString=ObjProto.toString,hasOwnProperty=ObjProto.hasOwnProperty;var nativeIsArray=Array.isArray,nativeKeys=Object.keys,nativeBind=FuncProto.bind,nativeCreate=Object.create;var Ctor=function(){};var _=function(obj){if(obj instanceof _)return obj;if(!(this instanceof _))return new _(obj);this._wrapped=obj;};if(typeof exports!=='undefined'){if(typeof module!=='undefined'&&module.exports)exports=module.exports=_;exports._=_;}else root._=_;_.VERSION='1.8.3';var optimizeCb=function(func,context,argCount){if(context===void 0)return func;switch(argCount==null?3:argCount){case 1:return function(value){return func.call(context,value);};case 2:return function(value,other){return func.call(context,value,other);};case 3:return function(value,index,collection){return func.call(context,value,index,collection);};case 4:return function(accumulator,value,index,collection){return func.call(context,accumulator,value,index,collection);};}return function(){return func.apply(context,arguments);};};var cb=function(value,context,argCount){if(value==null)return _.identity;if(_.isFunction(value))return optimizeCb(value,context,argCount);if(_.isObject(value))return _.matcher(value);return _.property(value);};_.iteratee=function(value,context){return cb(value,context,Infinity);};var restArgs=function(func,startIndex){startIndex=startIndex==null?func.length-1:+startIndex;return function(){var length=Math.max(arguments.length-startIndex,0);var rest=Array(length);for(var index=0;index<length;index++)rest[index]=arguments[index+startIndex];switch(startIndex){case 0:return func.call(this,rest);case 1:return func.call(this,arguments[0],rest);case 2:return func.call(this,arguments[0],arguments[1],rest);}var args=Array(startIndex+1);for(index=0;index<startIndex;index++)args[index]=arguments[index];args[startIndex]=rest;return func.apply(this,args);};};var baseCreate=function(prototype){if(!_.isObject(prototype))return{};if(nativeCreate)return nativeCreate(prototype);Ctor.prototype=prototype;var result=new Ctor();Ctor.prototype=null;return result;};var property=function(key){return function(obj){return obj==null?void 0:obj[key];};};var MAX_ARRAY_INDEX=Math.pow(2,53)-1;var getLength=property('length');var isArrayLike=function(collection){var length=getLength(collection);return typeof length=='number'&&length>=0&&length<=MAX_ARRAY_INDEX;};_.each=_.forEach=function(obj,iteratee,context){iteratee=optimizeCb(iteratee,context);var i,length;if(isArrayLike(obj))for(i=0,length=obj.length;i<length;i++)iteratee(obj[i],i,obj);else{var keys=_.keys(obj);for(i=0,length=keys.length;i<length;i++)iteratee(obj[keys[i]],keys[i],obj);}return obj;};_.map=_.collect=function(obj,iteratee,context){iteratee=cb(iteratee,context);var keys=!isArrayLike(obj)&&_.keys(obj),length=(keys||obj).length,results=Array(length);for(var index=0;index<length;index++){var currentKey=keys?keys[index]:index;results[index]=iteratee(obj[currentKey],currentKey,obj);}return results;};var createReduce=function(dir){var reducer=function(obj,iteratee,memo,initial){var keys=!isArrayLike(obj)&&_.keys(obj),length=(keys||obj).length,index=dir>0?0:length-1;if(!initial){memo=obj[keys?keys[index]:index];index+=dir;}for(;index>=0&&index<length;index+=dir){var currentKey=keys?keys[index]:index;memo=iteratee(memo,obj[currentKey],currentKey,obj);}return memo;};return function(obj,iteratee,memo,context){var initial=arguments.length>=3;return reducer(obj,optimizeCb(iteratee,context,4),memo,initial);};};_.reduce=_.foldl=_.inject=createReduce(1);_.reduceRight=_.foldr=createReduce(-1);_.find=_.detect=function(obj,predicate,context){var key;if(isArrayLike(obj))key=_.findIndex(obj,predicate,context);else key=_.findKey(obj,predicate,context);if(key!==void 0&&key!==-1)return obj[key];};_.filter=_.select=function(obj,predicate,context){var results=[];predicate=cb(predicate,context);_.each(obj,function(value,index,list){if(predicate(value,index,list))results.push(value);});return results;};_.reject=function(obj,predicate,context){return _.filter(obj,_.negate(cb(predicate)),context);};_.every=_.all=function(obj,predicate,context){predicate=cb(predicate,context);var keys=!isArrayLike(obj)&&_.keys(obj),length=(keys||obj).length;for(var index=0;index<length;index++){var currentKey=keys?keys[index]:index;if(!predicate(obj[currentKey],currentKey,obj))return false;}return true;};_.some=_.any=function(obj,predicate,context){predicate=cb(predicate,context);var keys=!isArrayLike(obj)&&_.keys(obj),length=(keys||obj).length;for(var index=0;index<length;index++){var currentKey=keys?keys[index]:index;if(predicate(obj[currentKey],currentKey,obj))return true;}return false;};_.contains=_.includes=_.include=function(obj,item,fromIndex,guard){if(!isArrayLike(obj))obj=_.values(obj);if(typeof fromIndex!='number'||guard)fromIndex=0;return _.indexOf(obj,item,fromIndex)>=0;};_.invoke=restArgs(function(obj,method,args){var isFunc=_.isFunction(method);return _.map(obj,function(value){var func=isFunc?method:value[method];return func==null?func:func.apply(value,args);});});_.pluck=function(obj,key){return _.map(obj,_.property(key));};_.where=function(obj,attrs){return _.filter(obj,_.matcher(attrs));};_.findWhere=function(obj,attrs){return _.find(obj,_.matcher(attrs));};_.max=function(obj,iteratee,context){var result=-Infinity,lastComputed=-Infinity,value,computed;if(iteratee==null&&obj!=null){obj=isArrayLike(obj)?obj:_.values(obj);for(var i=0,length=obj.length;i<length;i++){value=obj[i];if(value>result)result=value;}}else{iteratee=cb(iteratee,context);_.each(obj,function(value,index,list){computed=iteratee(value,index,list);if(computed>lastComputed||computed===-Infinity&&result===-Infinity){result=value;lastComputed=computed;}});}return result;};_.min=function(obj,iteratee,context){var result=Infinity,lastComputed=Infinity,value,computed;if(iteratee==null&&obj!=null){obj=isArrayLike(obj)?obj:_.values(obj);for(var i=0,length=obj.length;i<length;i++){value=obj[i];if(value<result)result=value;}}else{iteratee=cb(iteratee,context);_.each(obj,function(value,index,list){computed=iteratee(value,index,list);if(computed<lastComputed||computed===Infinity&&result===Infinity){result=value;lastComputed=computed;}});}return result;};_.shuffle=function(obj){var set=isArrayLike(obj)?obj:_.values(obj);var length=set.length;var shuffled=Array(length);for(var index=0,rand;index<length;index++){rand=_.random(0,index);if(rand!==index)shuffled[index]=shuffled[rand];shuffled[rand]=set[index];}return shuffled;};_.sample=function(obj,n,guard){if(n==null||guard){if(!isArrayLike(obj))obj=_.values(obj);return obj[_.random(obj.length-1)];}return _.shuffle(obj).slice(0,Math.max(0,n));};_.sortBy=function(obj,iteratee,context){iteratee=cb(iteratee,context);return _.pluck(_.map(obj,function(value,index,list){return{value:value,index:index,criteria:iteratee(value,index,list)};}).sort(function(left,right){var a=left.criteria;var b=right.criteria;if(a!==b){if(a>b||a===void 0)return 1;if(a<b||b===void 0)return -1;}return left.index-right.index;}),'value');};var group=function(behavior,partition){return function(obj,iteratee,context){var result=partition?[[],[]]:{};iteratee=cb(iteratee,context);_.each(obj,function(value,index){var key=iteratee(value,index,obj);behavior(result,value,key);});return result;};};_.groupBy=group(function(result,value,key){if(_.has(result,key))result[key].push(value);else result[key]=[value];});_.indexBy=group(function(result,value,key){result[key]=value;});_.countBy=group(function(result,value,key){if(_.has(result,key))result[key]++;else result[key]=1;});_.toArray=function(obj){if(!obj)return [];if(_.isArray(obj))return slice.call(obj);if(isArrayLike(obj))return _.map(obj,_.identity);return _.values(obj);};_.size=function(obj){if(obj==null)return 0;return isArrayLike(obj)?obj.length:_.keys(obj).length;};_.partition=group(function(result,value,pass){result[pass?0:1].push(value);},true);_.first=_.head=_.take=function(array,n,guard){if(array==null)return void 0;if(n==null||guard)return array[0];return _.initial(array,array.length-n);};_.initial=function(array,n,guard){return slice.call(array,0,Math.max(0,array.length-(n==null||guard?1:n)));};_.last=function(array,n,guard){if(array==null)return void 0;if(n==null||guard)return array[array.length-1];return _.rest(array,Math.max(0,array.length-n));};_.rest=_.tail=_.drop=function(array,n,guard){return slice.call(array,n==null||guard?1:n);};_.compact=function(array){return _.filter(array,_.identity);};var flatten=function(input,shallow,strict,startIndex){var output=[],idx=0;for(var i=startIndex||0,length=getLength(input);i<length;i++){var value=input[i];if(isArrayLike(value)&&(_.isArray(value)||_.isArguments(value))){if(!shallow)value=flatten(value,shallow,strict);var j=0,len=value.length;output.length+=len;while(j<len)output[idx++]=value[j++];}else if(!strict)output[idx++]=value;}return output;};_.flatten=function(array,shallow){return flatten(array,shallow,false);};_.without=restArgs(function(array,otherArrays){return _.difference(array,otherArrays);});_.uniq=_.unique=function(array,isSorted,iteratee,context){if(!_.isBoolean(isSorted)){context=iteratee;iteratee=isSorted;isSorted=false;}if(iteratee!=null)iteratee=cb(iteratee,context);var result=[];var seen=[];for(var i=0,length=getLength(array);i<length;i++){var value=array[i],computed=iteratee?iteratee(value,i,array):value;if(isSorted){if(!i||seen!==computed)result.push(value);seen=computed;}else if(iteratee){if(!_.contains(seen,computed)){seen.push(computed);result.push(value);}}else if(!_.contains(result,value))result.push(value);}return result;};_.union=function(){return _.uniq(flatten(arguments,true,true));};_.intersection=function(array){var result=[];var argsLength=arguments.length;for(var i=0,length=getLength(array);i<length;i++){var item=array[i];if(_.contains(result,item))continue;for(var j=1;j<argsLength;j++)if(!_.contains(arguments[j],item))break;if(j===argsLength)result.push(item);}return result;};_.difference=function(array){var rest=flatten(arguments,true,true,1);return _.filter(array,function(value){return !_.contains(rest,value);});};_.unzip=function(array){var length=array&&_.max(array,getLength).length||0;var result=Array(length);for(var index=0;index<length;index++)result[index]=_.pluck(array,index);return result;};_.zip=restArgs(_.unzip);_.object=function(list,values){var result={};for(var i=0,length=getLength(list);i<length;i++)if(values)result[list[i]]=values[i];else result[list[i][0]]=list[i][1];return result;};var createPredicateIndexFinder=function(dir){return function(array,predicate,context){predicate=cb(predicate,context);var length=getLength(array);var index=dir>0?0:length-1;for(;index>=0&&index<length;index+=dir)if(predicate(array[index],index,array))return index;return -1;};};_.findIndex=createPredicateIndexFinder(1);_.findLastIndex=createPredicateIndexFinder(-1);_.sortedIndex=function(array,obj,iteratee,context){iteratee=cb(iteratee,context,1);var value=iteratee(obj);var low=0,high=getLength(array);while(low<high){var mid=Math.floor((low+high)/2);if(iteratee(array[mid])<value)low=mid+1;else high=mid;}return low;};var createIndexFinder=function(dir,predicateFind,sortedIndex){return function(array,item,idx){var i=0,length=getLength(array);if(typeof idx=='number')if(dir>0)i=idx>=0?idx:Math.max(idx+length,i);else length=idx>=0?Math.min(idx+1,length):idx+length+1;else if(sortedIndex&&idx&&length){idx=sortedIndex(array,item);return array[idx]===item?idx:-1;}if(item!==item){idx=predicateFind(slice.call(array,i,length),_.isNaN);return idx>=0?idx+i:-1;}for(idx=dir>0?i:length-1;idx>=0&&idx<length;idx+=dir)if(array[idx]===item)return idx;return -1;};};_.indexOf=createIndexFinder(1,_.findIndex,_.sortedIndex);_.lastIndexOf=createIndexFinder(-1,_.findLastIndex);_.range=function(start,stop,step){if(stop==null){stop=start||0;start=0;}step=step||1;var length=Math.max(Math.ceil((stop-start)/step),0);var range=Array(length);for(var idx=0;idx<length;idx++,start+=step)range[idx]=start;return range;};var executeBound=function(sourceFunc,boundFunc,context,callingContext,args){if(!(callingContext instanceof boundFunc))return sourceFunc.apply(context,args);var self=baseCreate(sourceFunc.prototype);var result=sourceFunc.apply(self,args);if(_.isObject(result))return result;return self;};_.bind=function(func,context){if(nativeBind&&func.bind===nativeBind)return nativeBind.apply(func,slice.call(arguments,1));if(!_.isFunction(func))throw new TypeError('Bind must be called on a function');var args=slice.call(arguments,2);var bound=restArgs(function(callArgs){return executeBound(func,bound,context,this,args.concat(callArgs));});return bound;};_.partial=restArgs(function(func,boundArgs){var placeholder=_.partial.placeholder;var bound=function(){var position=0,length=boundArgs.length;var args=Array(length);for(var i=0;i<length;i++)args[i]=boundArgs[i]===placeholder?arguments[position++]:boundArgs[i];while(position<arguments.length)args.push(arguments[position++]);return executeBound(func,bound,this,this,args);};return bound;});_.partial.placeholder=_;_.bindAll=restArgs(function(obj,keys){if(keys.length<1)throw new Error('bindAll must be passed function names');return _.each(keys,function(key){obj[key]=_.bind(obj[key],obj);});});_.memoize=function(func,hasher){var memoize=function(key){var cache=memoize.cache;var address=''+(hasher?hasher.apply(this,arguments):key);if(!_.has(cache,address))cache[address]=func.apply(this,arguments);return cache[address];};memoize.cache={};return memoize;};_.delay=restArgs(function(func,wait,args){return setTimeout(function(){return func.apply(null,args);},wait);});_.defer=_.partial(_.delay,_,1);_.throttle=function(func,wait,options){var context,args,result;var timeout=null;var previous=0;if(!options)options={};var later=function(){previous=options.leading===false?0:_.now();timeout=null;result=func.apply(context,args);if(!timeout)context=args=null;};return function(){var now=_.now();if(!previous&&options.leading===false)previous=now;var remaining=wait-(now-previous);context=this;args=arguments;if(remaining<=0||remaining>wait){if(timeout){clearTimeout(timeout);timeout=null;}previous=now;result=func.apply(context,args);if(!timeout)context=args=null;}else if(!timeout&&options.trailing!==false)timeout=setTimeout(later,remaining);return result;};};_.debounce=function(func,wait,immediate){var timeout,args,context,timestamp,result;var later=function(){var last=_.now()-timestamp;if(last<wait&&last>=0)timeout=setTimeout(later,wait-last);else{timeout=null;if(!immediate){result=func.apply(context,args);if(!timeout)context=args=null;}}};return function(){context=this;args=arguments;timestamp=_.now();var callNow=immediate&&!timeout;if(!timeout)timeout=setTimeout(later,wait);if(callNow){result=func.apply(context,args);context=args=null;}return result;};};_.wrap=function(func,wrapper){return _.partial(wrapper,func);};_.negate=function(predicate){return function(){return !predicate.apply(this,arguments);};};_.compose=function(){var args=arguments;var start=args.length-1;return function(){var i=start;var result=args[start].apply(this,arguments);while(i--)result=args[i].call(this,result);return result;};};_.after=function(times,func){return function(){if(--times<1)return func.apply(this,arguments);};};_.before=function(times,func){var memo;return function(){if(--times>0)memo=func.apply(this,arguments);if(times<=1)func=null;return memo;};};_.once=_.partial(_.before,2);_.restArgs=restArgs;var hasEnumBug=!{toString:null}.propertyIsEnumerable('toString');var nonEnumerableProps=['valueOf','isPrototypeOf','toString','propertyIsEnumerable','hasOwnProperty','toLocaleString'];var collectNonEnumProps=function(obj,keys){var nonEnumIdx=nonEnumerableProps.length;var constructor=obj.constructor;var proto=(_.isFunction(constructor)&&constructor.prototype)||ObjProto;var prop='constructor';if(_.has(obj,prop)&&!_.contains(keys,prop))keys.push(prop);while(nonEnumIdx--){prop=nonEnumerableProps[nonEnumIdx];if(prop in obj&&obj[prop]!==proto[prop]&&!_.contains(keys,prop))keys.push(prop);}};_.keys=function(obj){if(!_.isObject(obj))return [];if(nativeKeys)return nativeKeys(obj);var keys=[];for(var key in obj)if(_.has(obj,key))keys.push(key);if(hasEnumBug)collectNonEnumProps(obj,keys);return keys;};_.allKeys=function(obj){if(!_.isObject(obj))return [];var keys=[];for(var key in obj)keys.push(key);if(hasEnumBug)collectNonEnumProps(obj,keys);return keys;};_.values=function(obj){var keys=_.keys(obj);var length=keys.length;var values=Array(length);for(var i=0;i<length;i++)values[i]=obj[keys[i]];return values;};_.mapObject=function(obj,iteratee,context){iteratee=cb(iteratee,context);var keys=_.keys(obj),length=keys.length,results={};for(var index=0;index<length;index++){var currentKey=keys[index];results[currentKey]=iteratee(obj[currentKey],currentKey,obj);}return results;};_.pairs=function(obj){var keys=_.keys(obj);var length=keys.length;var pairs=Array(length);for(var i=0;i<length;i++)pairs[i]=[keys[i],obj[keys[i]]];return pairs;};_.invert=function(obj){var result={};var keys=_.keys(obj);for(var i=0,length=keys.length;i<length;i++)result[obj[keys[i]]]=keys[i];return result;};_.functions=_.methods=function(obj){var names=[];for(var key in obj)if(_.isFunction(obj[key]))names.push(key);return names.sort();};var createAssigner=function(keysFunc,undefinedOnly){return function(obj){var length=arguments.length;if(length<2||obj==null)return obj;for(var index=1;index<length;index++){var source=arguments[index],keys=keysFunc(source),l=keys.length;for(var i=0;i<l;i++){var key=keys[i];if(!undefinedOnly||obj[key]===void 0)obj[key]=source[key];}}return obj;};};_.extend=createAssigner(_.allKeys);_.extendOwn=_.assign=createAssigner(_.keys);_.findKey=function(obj,predicate,context){predicate=cb(predicate,context);var keys=_.keys(obj),key;for(var i=0,length=keys.length;i<length;i++){key=keys[i];if(predicate(obj[key],key,obj))return key;}};_.pick=function(object,oiteratee,context){var result={},obj=object,iteratee,keys;if(obj==null)return result;if(_.isFunction(oiteratee)){keys=_.allKeys(obj);iteratee=optimizeCb(oiteratee,context);}else{keys=flatten(arguments,false,false,1);iteratee=function(value,key,obj){return key in obj;};obj=Object(obj);}for(var i=0,length=keys.length;i<length;i++){var key=keys[i];var value=obj[key];if(iteratee(value,key,obj))result[key]=value;}return result;};_.omit=function(obj,iteratee,context){if(_.isFunction(iteratee))iteratee=_.negate(iteratee);else{var keys=_.map(flatten(arguments,false,false,1),String);iteratee=function(value,key){return !_.contains(keys,key);};}return _.pick(obj,iteratee,context);};_.defaults=createAssigner(_.allKeys,true);_.create=function(prototype,props){var result=baseCreate(prototype);if(props)_.extendOwn(result,props);return result;};_.clone=function(obj){if(!_.isObject(obj))return obj;return _.isArray(obj)?obj.slice():_.extend({},obj);};_.tap=function(obj,interceptor){interceptor(obj);return obj;};_.isMatch=function(object,attrs){var keys=_.keys(attrs),length=keys.length;if(object==null)return !length;var obj=Object(object);for(var i=0;i<length;i++){var key=keys[i];if(attrs[key]!==obj[key]||!(key in obj))return false;}return true;};var eq=function(a,b,aStack,bStack){if(a===b)return a!==0||1/a===1/b;if(a==null||b==null)return a===b;if(a instanceof _)a=a._wrapped;if(b instanceof _)b=b._wrapped;var className=toString.call(a);if(className!==toString.call(b))return false;switch(className){case '[object RegExp]':case '[object String]':return ''+a===''+b;case '[object Number]':if(+a!==+a)return +b!==+b;return +a===0?1/+a===1/b:+a===+b;case '[object Date]':case '[object Boolean]':return +a===+b;}var areArrays=className==='[object Array]';if(!areArrays){if(typeof a!='object'||typeof b!='object')return false;var aCtor=a.constructor,bCtor=b.constructor;if(aCtor!==bCtor&&!(_.isFunction(aCtor)&&aCtor instanceof aCtor&&_.isFunction(bCtor)&&bCtor instanceof bCtor)&&('constructor' in a&&'constructor' in b))return false;}aStack=aStack||[];bStack=bStack||[];var length=aStack.length;while(length--)if(aStack[length]===a)return bStack[length]===b;aStack.push(a);bStack.push(b);if(areArrays){length=a.length;if(length!==b.length)return false;while(length--)if(!eq(a[length],b[length],aStack,bStack))return false;}else{var keys=_.keys(a),key;length=keys.length;if(_.keys(b).length!==length)return false;while(length--){key=keys[length];if(!(_.has(b,key)&&eq(a[key],b[key],aStack,bStack)))return false;}}aStack.pop();bStack.pop();return true;};_.isEqual=function(a,b){return eq(a,b);};_.isEmpty=function(obj){if(obj==null)return true;if(isArrayLike(obj)&&(_.isArray(obj)||_.isString(obj)||_.isArguments(obj)))return obj.length===0;return _.keys(obj).length===0;};_.isElement=function(obj){return !!(obj&&obj.nodeType===1);};_.isArray=nativeIsArray||function(obj){return toString.call(obj)==='[object Array]';};_.isObject=function(obj){var type=typeof obj;return type==='function'||type==='object'&&!!obj;};_.each(['Arguments','Function','String','Number','Date','RegExp','Error'],function(name){_['is'+name]=function(obj){return toString.call(obj)==='[object '+name+']';};});if(!_.isArguments(arguments))_.isArguments=function(obj){return _.has(obj,'callee');};if(typeof /./!='function'&&typeof Int8Array!='object')_.isFunction=function(obj){return typeof obj=='function'||false;};_.isFinite=function(obj){return isFinite(obj)&&!isNaN(parseFloat(obj));};_.isNaN=function(obj){return _.isNumber(obj)&&obj!==+obj;};_.isBoolean=function(obj){return obj===true||obj===false||toString.call(obj)==='[object Boolean]';};_.isNull=function(obj){return obj===null;};_.isUndefined=function(obj){return obj===void 0;};_.has=function(obj,key){return obj!=null&&hasOwnProperty.call(obj,key);};_.noConflict=function(){root._=previousUnderscore;return this;};_.identity=function(value){return value;};_.constant=function(value){return function(){return value;};};_.noop=function(){};_.property=property;_.propertyOf=function(obj){return obj==null?function(){}:function(key){return obj[key];};};_.matcher=_.matches=function(attrs){attrs=_.extendOwn({},attrs);return function(obj){return _.isMatch(obj,attrs);};};_.times=function(n,iteratee,context){var accum=Array(Math.max(0,n));iteratee=optimizeCb(iteratee,context,1);for(var i=0;i<n;i++)accum[i]=iteratee(i);return accum;};_.random=function(min,max){if(max==null){max=min;min=0;}return min+Math.floor(Math.random()*(max-min+1));};_.now=Date.now||function(){return new Date().getTime();};var escapeMap={'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#x27;','`':'&#x60;'};var unescapeMap=_.invert(escapeMap);var createEscaper=function(map){var escaper=function(match){return map[match];};var source='(?:'+_.keys(map).join('|')+')';var testRegexp=RegExp(source);var replaceRegexp=RegExp(source,'g');return function(string){string=string==null?'':''+string;return testRegexp.test(string)?string.replace(replaceRegexp,escaper):string;};};_.escape=createEscaper(escapeMap);_.unescape=createEscaper(unescapeMap);_.result=function(object,property,fallback){var value=object==null?void 0:object[property];if(value===void 0)value=fallback;return _.isFunction(value)?value.call(object):value;};var idCounter=0;_.uniqueId=function(prefix){var id=++idCounter+'';return prefix?prefix+id:id;};_.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var noMatch=/(.)^/;var escapes={"'":"'",'\\':'\\','\r':'r','\n':'n','\u2028':'u2028','\u2029':'u2029'};var escaper=/\\|'|\r|\n|\u2028|\u2029/g;var escapeChar=function(match){return '\\'+escapes[match];};_.template=function(text,settings,oldSettings){if(!settings&&oldSettings)settings=oldSettings;settings=_.defaults({},settings,_.templateSettings);var matcher=RegExp([(settings.escape||noMatch).source,(settings.interpolate||noMatch).source,(settings.evaluate||noMatch).source].join('|')+'|$','g');var index=0;var source="__p+='";text.replace(matcher,function(match,escape,interpolate,evaluate,offset){source+=text.slice(index,offset).replace(escaper,escapeChar);index=offset+match.length;if(escape)source+="'+\n((__t=("+escape+"))==null?'':_.escape(__t))+\n'";else if(interpolate)source+="'+\n((__t=("+interpolate+"))==null?'':__t)+\n'";else if(evaluate)source+="';\n"+evaluate+"\n__p+='";return match;});source+="';\n";if(!settings.variable)source='with(obj||{}){\n'+source+'}\n';source="var __t,__p='',__j=Array.prototype.join,"+"print=function(){__p+=__j.call(arguments,'');};\n"+source+'return __p;\n';try{var render=new Function(settings.variable||'obj','_',source);}catch(e){e.source=source;throw e;}var template=function(data){return render.call(this,data,_);};var argument=settings.variable||'obj';template.source='function('+argument+'){\n'+source+'}';return template;};_.chain=function(obj){var instance=_(obj);instance._chain=true;return instance;};var result=function(instance,obj){return instance._chain?_(obj).chain():obj;};_.mixin=function(obj){_.each(_.functions(obj),function(name){var func=_[name]=obj[name];_.prototype[name]=function(){var args=[this._wrapped];push.apply(args,arguments);return result(this,func.apply(_,args));};});};_.mixin(_);_.each(['pop','push','reverse','shift','sort','splice','unshift'],function(name){var method=ArrayProto[name];_.prototype[name]=function(){var obj=this._wrapped;method.apply(obj,arguments);if((name==='shift'||name==='splice')&&obj.length===0)delete obj[0];return result(this,obj);};});_.each(['concat','join','slice'],function(name){var method=ArrayProto[name];_.prototype[name]=function(){return result(this,method.apply(this._wrapped,arguments));};});_.prototype.value=function(){return this._wrapped;};_.prototype.valueOf=_.prototype.toJSON=_.prototype.value;_.prototype.toString=function(){return ''+this._wrapped;};if(typeof define==='function'&&define.amd)define('underscore',[],function(){return _;});}.call(this));
(function(window,factory){if(typeof define=='function'&&define.amd)define('jquery-bridget/jquery-bridget',['jquery'],function(jQuery){return factory(window,jQuery);});else if(typeof module=='object'&&module.exports)module.exports=factory(window,require('jquery'));else window.jQueryBridget=factory(window,window.jQuery);}(window,function factory(window,jQuery){'use strict';var arraySlice=Array.prototype.slice;var console=window.console;var logError=typeof console=='undefined'?function(){}:function(message){console.error(message);};function jQueryBridget(namespace,PluginClass,$){$=$||jQuery||window.jQuery;if(!$)return;if(!PluginClass.prototype.option)PluginClass.prototype.option=function(opts){if(!$.isPlainObject(opts))return;this.options=$.extend(true,this.options,opts);};$.fn[namespace]=function(arg0){if(typeof arg0=='string'){var args=arraySlice.call(arguments,1);return methodCall(this,arg0,args);}plainCall(this,arg0);return this;};function methodCall($elems,methodName,args){var returnValue;var pluginMethodStr='$().'+namespace+'("'+methodName+'")';$elems.each(function(i,elem){var instance=$.data(elem,namespace);if(!instance){logError(namespace+' not initialized. Cannot call methods, i.e. '+pluginMethodStr);return;}var method=instance[methodName];if(!method||methodName.charAt(0)=='_'){logError(pluginMethodStr+' is not a valid method');return;}var value=method.apply(instance,args);returnValue=returnValue===undefined?value:returnValue;});return returnValue!==undefined?returnValue:$elems;}function plainCall($elems,options){$elems.each(function(i,elem){var instance=$.data(elem,namespace);if(instance){instance.option(options);instance._init();}else{instance=new PluginClass(elem,options);$.data(elem,namespace,instance);}});}updateJQuery($);}function updateJQuery($){if(!$||($&&$.bridget))return;$.bridget=jQueryBridget;}updateJQuery(jQuery||window.jQuery);return jQueryBridget;}));(function(global,factory){if(typeof define=='function'&&define.amd)define('ev-emitter/ev-emitter',factory);else if(typeof module=='object'&&module.exports)module.exports=factory();else global.EvEmitter=factory();}(typeof window!='undefined'?window:this,function(){function EvEmitter(){}var proto=EvEmitter.prototype;proto.on=function(eventName,listener){if(!eventName||!listener)return;var events=this._events=this._events||{};var listeners=events[eventName]=events[eventName]||[];if(listeners.indexOf(listener)==-1)listeners.push(listener);return this;};proto.once=function(eventName,listener){if(!eventName||!listener)return;this.on(eventName,listener);var onceEvents=this._onceEvents=this._onceEvents||{};var onceListeners=onceEvents[eventName]=onceEvents[eventName]||{};onceListeners[listener]=true;return this;};proto.off=function(eventName,listener){var listeners=this._events&&this._events[eventName];if(!listeners||!listeners.length)return;var index=listeners.indexOf(listener);if(index!=-1)listeners.splice(index,1);return this;};proto.emitEvent=function(eventName,args){var listeners=this._events&&this._events[eventName];if(!listeners||!listeners.length)return;var i=0;var listener=listeners[i];args=args||[];var onceListeners=this._onceEvents&&this._onceEvents[eventName];while(listener){var isOnce=onceListeners&&onceListeners[listener];if(isOnce){this.off(eventName,listener);delete onceListeners[listener];}listener.apply(this,args);i+=isOnce?0:1;listener=listeners[i];}return this;};return EvEmitter;}));(function(window,factory){'use strict';if(typeof define=='function'&&define.amd)define('get-size/get-size',[],function(){return factory();});else if(typeof module=='object'&&module.exports)module.exports=factory();else window.getSize=factory();})(window,function factory(){'use strict';function getStyleSize(value){var num=parseFloat(value);var isValid=value.indexOf('%')==-1&&!isNaN(num);return isValid&&num;}function noop(){}var logError=typeof console=='undefined'?noop:function(message){console.error(message);};var measurements=['paddingLeft','paddingRight','paddingTop','paddingBottom','marginLeft','marginRight','marginTop','marginBottom','borderLeftWidth','borderRightWidth','borderTopWidth','borderBottomWidth'];var measurementsLength=measurements.length;function getZeroSize(){var size={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0};for(var i=0;i<measurementsLength;i++){var measurement=measurements[i];size[measurement]=0;}return size;}function getStyle(elem){var style=getComputedStyle(elem);if(!style)logError('Style returned '+style+'. Are you running this code in a hidden iframe on Firefox? '+'See http://bit.ly/getsizebug1');return style;}var isSetup=false;var isBoxSizeOuter;function setup(){if(isSetup)return;isSetup=true;var div=document.createElement('div');div.style.width='200px';div.style.padding='1px 2px 3px 4px';div.style.borderStyle='solid';div.style.borderWidth='1px 2px 3px 4px';div.style.boxSizing='border-box';var body=document.body||document.documentElement;body.appendChild(div);var style=getStyle(div);getSize.isBoxSizeOuter=isBoxSizeOuter=getStyleSize(style.width)==200;body.removeChild(div);}function getSize(elem){setup();if(typeof elem=='string')elem=document.querySelector(elem);if(!elem||typeof elem!='object'||!elem.nodeType)return;var style=getStyle(elem);if(style.display=='none')return getZeroSize();var size={};size.width=elem.offsetWidth;size.height=elem.offsetHeight;var isBorderBox=size.isBorderBox=style.boxSizing=='border-box';for(var i=0;i<measurementsLength;i++){var measurement=measurements[i];var value=style[measurement];var num=parseFloat(value);size[measurement]=!isNaN(num)?num:0;}var paddingWidth=size.paddingLeft+size.paddingRight;var paddingHeight=size.paddingTop+size.paddingBottom;var marginWidth=size.marginLeft+size.marginRight;var marginHeight=size.marginTop+size.marginBottom;var borderWidth=size.borderLeftWidth+size.borderRightWidth;var borderHeight=size.borderTopWidth+size.borderBottomWidth;var isBorderBoxSizeOuter=isBorderBox&&isBoxSizeOuter;var styleWidth=getStyleSize(style.width);if(styleWidth!==false)size.width=styleWidth+(isBorderBoxSizeOuter?0:paddingWidth+borderWidth);var styleHeight=getStyleSize(style.height);if(styleHeight!==false)size.height=styleHeight+(isBorderBoxSizeOuter?0:paddingHeight+borderHeight);size.innerWidth=size.width-(paddingWidth+borderWidth);size.innerHeight=size.height-(paddingHeight+borderHeight);size.outerWidth=size.width+marginWidth;size.outerHeight=size.height+marginHeight;return size;}return getSize;});(function(window,factory){'use strict';if(typeof define=='function'&&define.amd)define('desandro-matches-selector/matches-selector',factory);else if(typeof module=='object'&&module.exports)module.exports=factory();else window.matchesSelector=factory();}(window,function factory(){'use strict';var matchesMethod=(function(){var ElemProto=Element.prototype;if(ElemProto.matches)return 'matches';if(ElemProto.matchesSelector)return 'matchesSelector';var prefixes=['webkit','moz','ms','o'];for(var i=0;i<prefixes.length;i++){var prefix=prefixes[i];var method=prefix+'MatchesSelector';if(ElemProto[method])return method;}})();return function matchesSelector(elem,selector){return elem[matchesMethod](selector);};}));(function(window,factory){if(typeof define=='function'&&define.amd)define('fizzy-ui-utils/utils',['desandro-matches-selector/matches-selector'],function(matchesSelector){return factory(window,matchesSelector);});else if(typeof module=='object'&&module.exports)module.exports=factory(window,require('desandro-matches-selector'));else window.fizzyUIUtils=factory(window,window.matchesSelector);}(window,function factory(window,matchesSelector){var utils={};utils.extend=function(a,b){for(var prop in b)a[prop]=b[prop];return a;};utils.modulo=function(num,div){return((num%div)+div)%div;};utils.makeArray=function(obj){var ary=[];if(Array.isArray(obj))ary=obj;else if(obj&&typeof obj.length=='number')for(var i=0;i<obj.length;i++)ary.push(obj[i]);else ary.push(obj);return ary;};utils.removeFrom=function(ary,obj){var index=ary.indexOf(obj);if(index!=-1)ary.splice(index,1);};utils.getParent=function(elem,selector){while(elem!=document.body){elem=elem.parentNode;if(matchesSelector(elem,selector))return elem;}};utils.getQueryElement=function(elem){if(typeof elem=='string')return document.querySelector(elem);return elem;};utils.handleEvent=function(event){var method='on'+event.type;if(this[method])this[method](event);};utils.filterFindElements=function(elems,selector){elems=utils.makeArray(elems);var ffElems=[];elems.forEach(function(elem){if(!(elem instanceof HTMLElement))return;if(!selector){ffElems.push(elem);return;}if(matchesSelector(elem,selector))ffElems.push(elem);var childElems=elem.querySelectorAll(selector);for(var i=0;i<childElems.length;i++)ffElems.push(childElems[i]);});return ffElems;};utils.debounceMethod=function(_class,methodName,threshold){var method=_class.prototype[methodName];var timeoutName=methodName+'Timeout';_class.prototype[methodName]=function(){var timeout=this[timeoutName];if(timeout)clearTimeout(timeout);var args=arguments;var _this=this;this[timeoutName]=setTimeout(function(){method.apply(_this,args);delete _this[timeoutName];},threshold||100);};};utils.docReady=function(callback){var readyState=document.readyState;if(readyState=='complete'||readyState=='interactive')setTimeout(callback);else document.addEventListener('DOMContentLoaded',callback);};utils.toDashed=function(str){return str.replace(/(.)([A-Z])/g,function(match,$1,$2){return $1+'-'+$2;}).toLowerCase();};var console=window.console;utils.htmlInit=function(WidgetClass,namespace){utils.docReady(function(){var dashedNamespace=utils.toDashed(namespace);var dataAttr='data-'+dashedNamespace;var dataAttrElems=document.querySelectorAll('['+dataAttr+']');var jsDashElems=document.querySelectorAll('.js-'+dashedNamespace);var elems=utils.makeArray(dataAttrElems).concat(utils.makeArray(jsDashElems));var dataOptionsAttr=dataAttr+'-options';var jQuery=window.jQuery;elems.forEach(function(elem){var attr=elem.getAttribute(dataAttr)||elem.getAttribute(dataOptionsAttr);var options;try{options=attr&&JSON.parse(attr);}catch(error){if(console)console.error('Error parsing '+dataAttr+' on '+elem.className+': '+error);return;}var instance=new WidgetClass(elem,options);if(jQuery)jQuery.data(elem,namespace,instance);});});};return utils;}));(function(window,factory){if(typeof define=='function'&&define.amd)define('flickity/js/cell',['get-size/get-size'],function(getSize){return factory(window,getSize);});else if(typeof module=='object'&&module.exports)module.exports=factory(window,require('get-size'));else{window.Flickity=window.Flickity||{};window.Flickity.Cell=factory(window,window.getSize);}}(window,function factory(window,getSize){function Cell(elem,parent){this.element=elem;this.parent=parent;this.create();}var proto=Cell.prototype;proto.create=function(){this.element.style.position='absolute';this.x=0;this.shift=0;};proto.destroy=function(){this.element.style.position='';var side=this.parent.originSide;this.element.style[side]='';};proto.getSize=function(){this.size=getSize(this.element);};proto.setPosition=function(x){this.x=x;this.updateTarget();this.renderPosition(x);};proto.updateTarget=proto.setDefaultTarget=function(){var marginProperty=this.parent.originSide=='left'?'marginLeft':'marginRight';this.target=this.x+this.size[marginProperty]+this.size.width*this.parent.cellAlign;};proto.renderPosition=function(x){var side=this.parent.originSide;this.element.style[side]=this.parent.getPositionValue(x);};proto.wrapShift=function(shift){this.shift=shift;this.renderPosition(this.x+this.parent.slideableWidth*shift);};proto.remove=function(){this.element.parentNode.removeChild(this.element);};return Cell;}));(function(window,factory){if(typeof define=='function'&&define.amd)define('flickity/js/slide',factory);else if(typeof module=='object'&&module.exports)module.exports=factory();else{window.Flickity=window.Flickity||{};window.Flickity.Slide=factory();}}(window,function factory(){'use strict';function Slide(parent){this.parent=parent;this.isOriginLeft=parent.originSide=='left';this.cells=[];this.outerWidth=0;this.height=0;}var proto=Slide.prototype;proto.addCell=function(cell){this.cells.push(cell);this.outerWidth+=cell.size.outerWidth;this.height=Math.max(cell.size.outerHeight,this.height);if(this.cells.length==1){this.x=cell.x;var beginMargin=this.isOriginLeft?'marginLeft':'marginRight';this.firstMargin=cell.size[beginMargin];}};proto.updateTarget=function(){var endMargin=this.isOriginLeft?'marginRight':'marginLeft';var lastCell=this.getLastCell();var lastMargin=lastCell?lastCell.size[endMargin]:0;var slideWidth=this.outerWidth-(this.firstMargin+lastMargin);this.target=this.x+this.firstMargin+slideWidth*this.parent.cellAlign;};proto.getLastCell=function(){return this.cells[this.cells.length-1];};proto.select=function(){this.changeSelectedClass('add');};proto.unselect=function(){this.changeSelectedClass('remove');};proto.changeSelectedClass=function(method){this.cells.forEach(function(cell){cell.element.classList[method]('is-selected');});};proto.getCellElements=function(){return this.cells.map(function(cell){return cell.element;});};return Slide;}));(function(window,factory){if(typeof define=='function'&&define.amd)define('flickity/js/animate',['fizzy-ui-utils/utils'],function(utils){return factory(window,utils);});else if(typeof module=='object'&&module.exports)module.exports=factory(window,require('fizzy-ui-utils'));else{window.Flickity=window.Flickity||{};window.Flickity.animatePrototype=factory(window,window.fizzyUIUtils);}}(window,function factory(window,utils){var requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame;var lastTime=0;if(!requestAnimationFrame)requestAnimationFrame=function(callback){var currTime=new Date().getTime();var timeToCall=Math.max(0,16-(currTime-lastTime));var id=setTimeout(callback,timeToCall);lastTime=currTime+timeToCall;return id;};var proto={};proto.startAnimation=function(){if(this.isAnimating)return;this.isAnimating=true;this.restingFrames=0;this.animate();};proto.animate=function(){this.applyDragForce();this.applySelectedAttraction();var previousX=this.x;this.integratePhysics();this.positionSlider();this.settle(previousX);if(this.isAnimating){var _this=this;requestAnimationFrame(function animateFrame(){_this.animate();});}};var transformProperty=(function(){var style=document.documentElement.style;if(typeof style.transform=='string')return 'transform';return 'WebkitTransform';})();proto.positionSlider=function(){var x=this.x;if(this.options.wrapAround&&this.cells.length>1){x=utils.modulo(x,this.slideableWidth);x=x-this.slideableWidth;this.shiftWrapCells(x);}x=x+this.cursorPosition;x=this.options.rightToLeft&&transformProperty?-x:x;var value=this.getPositionValue(x);this.slider.style[transformProperty]=this.isAnimating?'translate3d('+value+',0,0)':'translateX('+value+')';var firstSlide=this.slides[0];if(firstSlide){var positionX=-this.x-firstSlide.target;var progress=positionX/this.slidesWidth;this.dispatchEvent('scroll',null,[progress,positionX]);}};proto.positionSliderAtSelected=function(){if(!this.cells.length)return;this.x=-this.selectedSlide.target;this.positionSlider();};proto.getPositionValue=function(position){if(this.options.percentPosition)return(Math.round((position/this.size.innerWidth)*10000)*0.01)+'%';else return Math.round(position)+'px';};proto.settle=function(previousX){if(!this.isPointerDown&&Math.round(this.x*100)==Math.round(previousX*100))this.restingFrames++;if(this.restingFrames>2){this.isAnimating=false;delete this.isFreeScrolling;this.positionSlider();this.dispatchEvent('settle');}};proto.shiftWrapCells=function(x){var beforeGap=this.cursorPosition+x;this._shiftCells(this.beforeShiftCells,beforeGap,-1);var afterGap=this.size.innerWidth-(x+this.slideableWidth+this.cursorPosition);this._shiftCells(this.afterShiftCells,afterGap,1);};proto._shiftCells=function(cells,gap,shift){for(var i=0;i<cells.length;i++){var cell=cells[i];var cellShift=gap>0?shift:0;cell.wrapShift(cellShift);gap-=cell.size.outerWidth;}};proto._unshiftCells=function(cells){if(!cells||!cells.length)return;for(var i=0;i<cells.length;i++)cells[i].wrapShift(0);};proto.integratePhysics=function(){this.x+=this.velocity;this.velocity*=this.getFrictionFactor();};proto.applyForce=function(force){this.velocity+=force;};proto.getFrictionFactor=function(){return 1-this.options[this.isFreeScrolling?'freeScrollFriction':'friction'];};proto.getRestingPosition=function(){return this.x+this.velocity/(1-this.getFrictionFactor());};proto.applyDragForce=function(){if(!this.isPointerDown)return;var dragVelocity=this.dragX-this.x;var dragForce=dragVelocity-this.velocity;this.applyForce(dragForce);};proto.applySelectedAttraction=function(){if(this.isPointerDown||this.isFreeScrolling||!this.cells.length)return;var distance=this.selectedSlide.target*-1-this.x;var force=distance*this.options.selectedAttraction;this.applyForce(force);};return proto;}));(function(window,factory){if(typeof define=='function'&&define.amd)define('flickity/js/flickity',['ev-emitter/ev-emitter','get-size/get-size','fizzy-ui-utils/utils','./cell','./slide','./animate'],function(EvEmitter,getSize,utils,Cell,Slide,animatePrototype){return factory(window,EvEmitter,getSize,utils,Cell,Slide,animatePrototype);});else if(typeof module=='object'&&module.exports)module.exports=factory(window,require('ev-emitter'),require('get-size'),require('fizzy-ui-utils'),require('./cell'),require('./slide'),require('./animate'));else{var _Flickity=window.Flickity;window.Flickity=factory(window,window.EvEmitter,window.getSize,window.fizzyUIUtils,_Flickity.Cell,_Flickity.Slide,_Flickity.animatePrototype);}}(window,function factory(window,EvEmitter,getSize,utils,Cell,Slide,animatePrototype){var jQuery=window.jQuery;var getComputedStyle=window.getComputedStyle;var console=window.console;function moveElements(elems,toElem){elems=utils.makeArray(elems);while(elems.length)toElem.appendChild(elems.shift());}var GUID=0;var instances={};function Flickity(element,options){var queryElement=utils.getQueryElement(element);if(!queryElement){if(console)console.error('Bad element for Flickity: '+(queryElement||element));return;}this.element=queryElement;if(this.element.flickityGUID){var instance=instances[this.element.flickityGUID];instance.option(options);return instance;}if(jQuery)this.$element=jQuery(this.element);this.options=utils.extend({},this.constructor.defaults);this.option(options);this._create();}Flickity.defaults={accessibility:true,cellAlign:'center',freeScrollFriction:0.075,friction:0.28,namespaceJQueryEvents:true,percentPosition:true,resize:true,selectedAttraction:0.025,setGallerySize:true};Flickity.createMethods=[];var proto=Flickity.prototype;utils.extend(proto,EvEmitter.prototype);proto._create=function(){var id=this.guid=++GUID;this.element.flickityGUID=id;instances[id]=this;this.selectedIndex=0;this.restingFrames=0;this.x=0;this.velocity=0;this.originSide=this.options.rightToLeft?'right':'left';this.viewport=document.createElement('div');this.viewport.className='flickity-viewport';this._createSlider();if(this.options.resize||this.options.watchCSS)window.addEventListener('resize',this);Flickity.createMethods.forEach(function(method){this[method]();},this);if(this.options.watchCSS)this.watchCSS();else this.activate();};proto.option=function(opts){utils.extend(this.options,opts);};proto.activate=function(){if(this.isActive)return;this.isActive=true;this.element.classList.add('flickity-enabled');if(this.options.rightToLeft)this.element.classList.add('flickity-rtl');this.getSize();var cellElems=this._filterFindCellElements(this.element.children);moveElements(cellElems,this.slider);this.viewport.appendChild(this.slider);this.element.appendChild(this.viewport);this.reloadCells();if(this.options.accessibility){this.element.tabIndex=0;this.element.addEventListener('keydown',this);}this.emitEvent('activate');var index;var initialIndex=this.options.initialIndex;if(this.isInitActivated)index=this.selectedIndex;else if(initialIndex!==undefined)index=this.cells[initialIndex]?initialIndex:0;else index=0;this.select(index,false,true);this.isInitActivated=true;};proto._createSlider=function(){var slider=document.createElement('div');slider.className='flickity-slider';slider.style[this.originSide]=0;this.slider=slider;};proto._filterFindCellElements=function(elems){return utils.filterFindElements(elems,this.options.cellSelector);};proto.reloadCells=function(){this.cells=this._makeCells(this.slider.children);this.positionCells();this._getWrapShiftCells();this.setGallerySize();};proto._makeCells=function(elems){var cellElems=this._filterFindCellElements(elems);var cells=cellElems.map(function(cellElem){return new Cell(cellElem,this);},this);return cells;};proto.getLastCell=function(){return this.cells[this.cells.length-1];};proto.getLastSlide=function(){return this.slides[this.slides.length-1];};proto.positionCells=function(){this._sizeCells(this.cells);this._positionCells(0);};proto._positionCells=function(index){index=index||0;this.maxCellHeight=index?this.maxCellHeight||0:0;var cellX=0;if(index>0){var startCell=this.cells[index-1];cellX=startCell.x+startCell.size.outerWidth;}var len=this.cells.length;for(var i=index;i<len;i++){var cell=this.cells[i];cell.setPosition(cellX);cellX+=cell.size.outerWidth;this.maxCellHeight=Math.max(cell.size.outerHeight,this.maxCellHeight);}this.slideableWidth=cellX;this.updateSlides();this._containSlides();this.slidesWidth=len?this.getLastSlide().target-this.slides[0].target:0;};proto._sizeCells=function(cells){cells.forEach(function(cell){cell.getSize();});};proto.updateSlides=function(){this.slides=[];if(!this.cells.length)return;var slide=new Slide(this);this.slides.push(slide);var isOriginLeft=this.originSide=='left';var nextMargin=isOriginLeft?'marginRight':'marginLeft';var canCellFit=this._getCanCellFit();this.cells.forEach(function(cell,i){if(!slide.cells.length){slide.addCell(cell);return;}var slideWidth=(slide.outerWidth-slide.firstMargin)+(cell.size.outerWidth-cell.size[nextMargin]);if(canCellFit.call(this,i,slideWidth))slide.addCell(cell);else{slide.updateTarget();slide=new Slide(this);this.slides.push(slide);slide.addCell(cell);}},this);slide.updateTarget();this.updateSelectedSlide();};proto._getCanCellFit=function(){var groupCells=this.options.groupCells;if(!groupCells)return function(){return false;};else if(typeof groupCells=='number'){var number=parseInt(groupCells,10);return function(i){return(i%number)!==0;};}var percentMatch=typeof groupCells=='string'&&groupCells.match(/^(\d+)%$/);var percent=percentMatch?parseInt(percentMatch[1],10)/100:1;return function(i,slideWidth){return slideWidth<=(this.size.innerWidth+1)*percent;};};proto._init=proto.reposition=function(){this.positionCells();this.positionSliderAtSelected();};proto.getSize=function(){this.size=getSize(this.element);this.setCellAlign();this.cursorPosition=this.size.innerWidth*this.cellAlign;};var cellAlignShorthands={center:{left:0.5,right:0.5},left:{left:0,right:1},right:{right:0,left:1}};proto.setCellAlign=function(){var shorthand=cellAlignShorthands[this.options.cellAlign];this.cellAlign=shorthand?shorthand[this.originSide]:this.options.cellAlign;};proto.setGallerySize=function(){if(this.options.setGallerySize){var height=this.options.adaptiveHeight&&this.selectedSlide?this.selectedSlide.height:this.maxCellHeight;this.viewport.style.height=height+'px';}};proto._getWrapShiftCells=function(){if(!this.options.wrapAround)return;this._unshiftCells(this.beforeShiftCells);this._unshiftCells(this.afterShiftCells);var gapX=this.cursorPosition;var cellIndex=this.cells.length-1;this.beforeShiftCells=this._getGapCells(gapX,cellIndex,-1);gapX=this.size.innerWidth-this.cursorPosition;this.afterShiftCells=this._getGapCells(gapX,0,1);};proto._getGapCells=function(gapX,cellIndex,increment){var cells=[];while(gapX>0){var cell=this.cells[cellIndex];if(!cell)break;cells.push(cell);cellIndex+=increment;gapX-=cell.size.outerWidth;}return cells;};proto._containSlides=function(){if(!this.options.contain||this.options.wrapAround||!this.cells.length)return;var isRightToLeft=this.options.rightToLeft;var beginMargin=isRightToLeft?'marginRight':'marginLeft';var endMargin=isRightToLeft?'marginLeft':'marginRight';var contentWidth=this.slideableWidth-this.getLastCell().size[endMargin];var isContentSmaller=contentWidth<this.size.innerWidth;var beginBound=this.cursorPosition+this.cells[0].size[beginMargin];var endBound=contentWidth-this.size.innerWidth*(1-this.cellAlign);this.slides.forEach(function(slide){if(isContentSmaller)slide.target=contentWidth*this.cellAlign;else{slide.target=Math.max(slide.target,beginBound);slide.target=Math.min(slide.target,endBound);}},this);};proto.dispatchEvent=function(type,event,args){var emitArgs=event?[event].concat(args):args;this.emitEvent(type,emitArgs);if(jQuery&&this.$element){type+=this.options.namespaceJQueryEvents?'.flickity':'';var $event=type;if(event){var jQEvent=jQuery.Event(event);jQEvent.type=type;$event=jQEvent;}this.$element.trigger($event,args);}};proto.select=function(index,isWrap,isInstant){if(!this.isActive)return;index=parseInt(index,10);this._wrapSelect(index);if(this.options.wrapAround||isWrap)index=utils.modulo(index,this.slides.length);if(!this.slides[index])return;this.selectedIndex=index;this.updateSelectedSlide();if(isInstant)this.positionSliderAtSelected();else this.startAnimation();if(this.options.adaptiveHeight)this.setGallerySize();this.dispatchEvent('select');this.dispatchEvent('cellSelect');};proto._wrapSelect=function(index){var len=this.slides.length;var isWrapping=this.options.wrapAround&&len>1;if(!isWrapping)return index;var wrapIndex=utils.modulo(index,len);var delta=Math.abs(wrapIndex-this.selectedIndex);var backWrapDelta=Math.abs((wrapIndex+len)-this.selectedIndex);var forewardWrapDelta=Math.abs((wrapIndex-len)-this.selectedIndex);if(!this.isDragSelect&&backWrapDelta<delta)index+=len;else if(!this.isDragSelect&&forewardWrapDelta<delta)index-=len;if(index<0)this.x-=this.slideableWidth;else if(index>=len)this.x+=this.slideableWidth;};proto.previous=function(isWrap,isInstant){this.select(this.selectedIndex-1,isWrap,isInstant);};proto.next=function(isWrap,isInstant){this.select(this.selectedIndex+1,isWrap,isInstant);};proto.updateSelectedSlide=function(){var slide=this.slides[this.selectedIndex];if(!slide)return;this.unselectSelectedSlide();this.selectedSlide=slide;slide.select();this.selectedCells=slide.cells;this.selectedElements=slide.getCellElements();this.selectedCell=slide.cells[0];this.selectedElement=this.selectedElements[0];};proto.unselectSelectedSlide=function(){if(this.selectedSlide)this.selectedSlide.unselect();};proto.selectCell=function(value,isWrap,isInstant){var cell;if(typeof value=='number')cell=this.cells[value];else{if(typeof value=='string')value=this.element.querySelector(value);cell=this.getCell(value);}for(var i=0;cell&&i<this.slides.length;i++){var slide=this.slides[i];var index=slide.cells.indexOf(cell);if(index!=-1){this.select(i,isWrap,isInstant);return;}}};proto.getCell=function(elem){for(var i=0;i<this.cells.length;i++){var cell=this.cells[i];if(cell.element==elem)return cell;}};proto.getCells=function(elems){elems=utils.makeArray(elems);var cells=[];elems.forEach(function(elem){var cell=this.getCell(elem);if(cell)cells.push(cell);},this);return cells;};proto.getCellElements=function(){return this.cells.map(function(cell){return cell.element;});};proto.getParentCell=function(elem){var cell=this.getCell(elem);if(cell)return cell;elem=utils.getParent(elem,'.flickity-slider > *');return this.getCell(elem);};proto.getAdjacentCellElements=function(adjCount,index){if(!adjCount)return this.selectedSlide.getCellElements();index=index===undefined?this.selectedIndex:index;var len=this.slides.length;if(1+(adjCount*2)>=len)return this.getCellElements();var cellElems=[];for(var i=index-adjCount;i<=index+adjCount;i++){var slideIndex=this.options.wrapAround?utils.modulo(i,len):i;var slide=this.slides[slideIndex];if(slide)cellElems=cellElems.concat(slide.getCellElements());}return cellElems;};proto.uiChange=function(){this.emitEvent('uiChange');};proto.childUIPointerDown=function(event){this.emitEvent('childUIPointerDown',[event]);};proto.onresize=function(){this.watchCSS();this.resize();};utils.debounceMethod(Flickity,'onresize',150);proto.resize=function(){if(!this.isActive)return;this.getSize();if(this.options.wrapAround)this.x=utils.modulo(this.x,this.slideableWidth);this.positionCells();this._getWrapShiftCells();this.setGallerySize();this.emitEvent('resize');var selectedElement=this.selectedElements&&this.selectedElements[0];this.selectCell(selectedElement,false,true);};proto.watchCSS=function(){var watchOption=this.options.watchCSS;if(!watchOption)return;var afterContent=getComputedStyle(this.element,':after').content;if(afterContent.indexOf('flickity')!=-1)this.activate();else this.deactivate();};proto.onkeydown=function(event){if(!this.options.accessibility||(document.activeElement&&document.activeElement!=this.element))return;if(event.keyCode==37){var leftMethod=this.options.rightToLeft?'next':'previous';this.uiChange();this[leftMethod]();}else if(event.keyCode==39){var rightMethod=this.options.rightToLeft?'previous':'next';this.uiChange();this[rightMethod]();}};proto.deactivate=function(){if(!this.isActive)return;this.element.classList.remove('flickity-enabled');this.element.classList.remove('flickity-rtl');this.cells.forEach(function(cell){cell.destroy();});this.unselectSelectedSlide();this.element.removeChild(this.viewport);moveElements(this.slider.children,this.element);if(this.options.accessibility){this.element.removeAttribute('tabIndex');this.element.removeEventListener('keydown',this);}this.isActive=false;this.emitEvent('deactivate');};proto.destroy=function(){this.deactivate();window.removeEventListener('resize',this);this.emitEvent('destroy');if(jQuery&&this.$element)jQuery.removeData(this.element,'flickity');delete this.element.flickityGUID;delete instances[this.guid];};utils.extend(proto,animatePrototype);Flickity.data=function(elem){elem=utils.getQueryElement(elem);var id=elem&&elem.flickityGUID;return id&&instances[id];};utils.htmlInit(Flickity,'flickity');if(jQuery&&jQuery.bridget)jQuery.bridget('flickity',Flickity);Flickity.Cell=Cell;return Flickity;}));(function(window,factory){if(typeof define=='function'&&define.amd)define('unipointer/unipointer',['ev-emitter/ev-emitter'],function(EvEmitter){return factory(window,EvEmitter);});else if(typeof module=='object'&&module.exports)module.exports=factory(window,require('ev-emitter'));else window.Unipointer=factory(window,window.EvEmitter);}(window,function factory(window,EvEmitter){function noop(){}function Unipointer(){}var proto=Unipointer.prototype=Object.create(EvEmitter.prototype);proto.bindStartEvent=function(elem){this._bindStartEvent(elem,true);};proto.unbindStartEvent=function(elem){this._bindStartEvent(elem,false);};proto._bindStartEvent=function(elem,isBind){isBind=isBind===undefined?true:!!isBind;var bindMethod=isBind?'addEventListener':'removeEventListener';if(window.navigator.pointerEnabled)elem[bindMethod]('pointerdown',this);else if(window.navigator.msPointerEnabled)elem[bindMethod]('MSPointerDown',this);else{elem[bindMethod]('mousedown',this);elem[bindMethod]('touchstart',this);}};proto.handleEvent=function(event){var method='on'+event.type;if(this[method])this[method](event);};proto.getTouch=function(touches){for(var i=0;i<touches.length;i++){var touch=touches[i];if(touch.identifier==this.pointerIdentifier)return touch;}};proto.onmousedown=function(event){var button=event.button;if(button&&(button!==0&&button!==1))return;this._pointerDown(event,event);};proto.ontouchstart=function(event){this._pointerDown(event,event.changedTouches[0]);};proto.onMSPointerDown=proto.onpointerdown=function(event){this._pointerDown(event,event);};proto._pointerDown=function(event,pointer){if(this.isPointerDown)return;this.isPointerDown=true;this.pointerIdentifier=pointer.pointerId!==undefined?pointer.pointerId:pointer.identifier;this.pointerDown(event,pointer);};proto.pointerDown=function(event,pointer){this._bindPostStartEvents(event);this.emitEvent('pointerDown',[event,pointer]);};var postStartEvents={mousedown:['mousemove','mouseup'],touchstart:['touchmove','touchend','touchcancel'],pointerdown:['pointermove','pointerup','pointercancel'],MSPointerDown:['MSPointerMove','MSPointerUp','MSPointerCancel']};proto._bindPostStartEvents=function(event){if(!event)return;var events=postStartEvents[event.type];events.forEach(function(eventName){window.addEventListener(eventName,this);},this);this._boundPointerEvents=events;};proto._unbindPostStartEvents=function(){if(!this._boundPointerEvents)return;this._boundPointerEvents.forEach(function(eventName){window.removeEventListener(eventName,this);},this);delete this._boundPointerEvents;};proto.onmousemove=function(event){this._pointerMove(event,event);};proto.onMSPointerMove=proto.onpointermove=function(event){if(event.pointerId==this.pointerIdentifier)this._pointerMove(event,event);};proto.ontouchmove=function(event){var touch=this.getTouch(event.changedTouches);if(touch)this._pointerMove(event,touch);};proto._pointerMove=function(event,pointer){this.pointerMove(event,pointer);};proto.pointerMove=function(event,pointer){this.emitEvent('pointerMove',[event,pointer]);};proto.onmouseup=function(event){this._pointerUp(event,event);};proto.onMSPointerUp=proto.onpointerup=function(event){if(event.pointerId==this.pointerIdentifier)this._pointerUp(event,event);};proto.ontouchend=function(event){var touch=this.getTouch(event.changedTouches);if(touch)this._pointerUp(event,touch);};proto._pointerUp=function(event,pointer){this._pointerDone();this.pointerUp(event,pointer);};proto.pointerUp=function(event,pointer){this.emitEvent('pointerUp',[event,pointer]);};proto._pointerDone=function(){this.isPointerDown=false;delete this.pointerIdentifier;this._unbindPostStartEvents();this.pointerDone();};proto.pointerDone=noop;proto.onMSPointerCancel=proto.onpointercancel=function(event){if(event.pointerId==this.pointerIdentifier)this._pointerCancel(event,event);};proto.ontouchcancel=function(event){var touch=this.getTouch(event.changedTouches);if(touch)this._pointerCancel(event,touch);};proto._pointerCancel=function(event,pointer){this._pointerDone();this.pointerCancel(event,pointer);};proto.pointerCancel=function(event,pointer){this.emitEvent('pointerCancel',[event,pointer]);};Unipointer.getPointerPoint=function(pointer){return{x:pointer.pageX,y:pointer.pageY};};return Unipointer;}));(function(window,factory){if(typeof define=='function'&&define.amd)define('unidragger/unidragger',['unipointer/unipointer'],function(Unipointer){return factory(window,Unipointer);});else if(typeof module=='object'&&module.exports)module.exports=factory(window,require('unipointer'));else window.Unidragger=factory(window,window.Unipointer);}(window,function factory(window,Unipointer){function noop(){}function Unidragger(){}var proto=Unidragger.prototype=Object.create(Unipointer.prototype);proto.bindHandles=function(){this._bindHandles(true);};proto.unbindHandles=function(){this._bindHandles(false);};var navigator=window.navigator;proto._bindHandles=function(isBind){isBind=isBind===undefined?true:!!isBind;var binderExtra;if(navigator.pointerEnabled)binderExtra=function(handle){handle.style.touchAction=isBind?'none':'';};else if(navigator.msPointerEnabled)binderExtra=function(handle){handle.style.msTouchAction=isBind?'none':'';};else binderExtra=noop;var bindMethod=isBind?'addEventListener':'removeEventListener';for(var i=0;i<this.handles.length;i++){var handle=this.handles[i];this._bindStartEvent(handle,isBind);binderExtra(handle);handle[bindMethod]('click',this);}};proto.pointerDown=function(event,pointer){if(event.target.nodeName=='INPUT'&&event.target.type=='range'){this.isPointerDown=false;delete this.pointerIdentifier;return;}this._dragPointerDown(event,pointer);var focused=document.activeElement;if(focused&&focused.blur)focused.blur();this._bindPostStartEvents(event);this.emitEvent('pointerDown',[event,pointer]);};proto._dragPointerDown=function(event,pointer){this.pointerDownPoint=Unipointer.getPointerPoint(pointer);var canPreventDefault=this.canPreventDefaultOnPointerDown(event,pointer);if(canPreventDefault)event.preventDefault();};proto.canPreventDefaultOnPointerDown=function(event){return event.target.nodeName!='SELECT';};proto.pointerMove=function(event,pointer){var moveVector=this._dragPointerMove(event,pointer);this.emitEvent('pointerMove',[event,pointer,moveVector]);this._dragMove(event,pointer,moveVector);};proto._dragPointerMove=function(event,pointer){var movePoint=Unipointer.getPointerPoint(pointer);var moveVector={x:movePoint.x-this.pointerDownPoint.x,y:movePoint.y-this.pointerDownPoint.y};if(!this.isDragging&&this.hasDragStarted(moveVector))this._dragStart(event,pointer);return moveVector;};proto.hasDragStarted=function(moveVector){return Math.abs(moveVector.x)>3||Math.abs(moveVector.y)>3;};proto.pointerUp=function(event,pointer){this.emitEvent('pointerUp',[event,pointer]);this._dragPointerUp(event,pointer);};proto._dragPointerUp=function(event,pointer){if(this.isDragging)this._dragEnd(event,pointer);else this._staticClick(event,pointer);};proto._dragStart=function(event,pointer){this.isDragging=true;this.dragStartPoint=Unipointer.getPointerPoint(pointer);this.isPreventingClicks=true;this.dragStart(event,pointer);};proto.dragStart=function(event,pointer){this.emitEvent('dragStart',[event,pointer]);};proto._dragMove=function(event,pointer,moveVector){if(!this.isDragging)return;this.dragMove(event,pointer,moveVector);};proto.dragMove=function(event,pointer,moveVector){event.preventDefault();this.emitEvent('dragMove',[event,pointer,moveVector]);};proto._dragEnd=function(event,pointer){this.isDragging=false;setTimeout(function(){delete this.isPreventingClicks;}.bind(this));this.dragEnd(event,pointer);};proto.dragEnd=function(event,pointer){this.emitEvent('dragEnd',[event,pointer]);};proto.onclick=function(event){if(this.isPreventingClicks)event.preventDefault();};proto._staticClick=function(event,pointer){if(this.isIgnoringMouseUp&&event.type=='mouseup')return;var nodeName=event.target.nodeName;if(nodeName=='INPUT'||nodeName=='TEXTAREA')event.target.focus();this.staticClick(event,pointer);if(event.type!='mouseup'){this.isIgnoringMouseUp=true;setTimeout(function(){delete this.isIgnoringMouseUp;}.bind(this),400);}};proto.staticClick=function(event,pointer){this.emitEvent('staticClick',[event,pointer]);};Unidragger.getPointerPoint=Unipointer.getPointerPoint;return Unidragger;}));(function(window,factory){if(typeof define=='function'&&define.amd)define('flickity/js/drag',['./flickity','unidragger/unidragger','fizzy-ui-utils/utils'],function(Flickity,Unidragger,utils){return factory(window,Flickity,Unidragger,utils);});else if(typeof module=='object'&&module.exports)module.exports=factory(window,require('./flickity'),require('unidragger'),require('fizzy-ui-utils'));else window.Flickity=factory(window,window.Flickity,window.Unidragger,window.fizzyUIUtils);}(window,function factory(window,Flickity,Unidragger,utils){utils.extend(Flickity.defaults,{draggable:true,dragThreshold:3});Flickity.createMethods.push('_createDrag');var proto=Flickity.prototype;utils.extend(proto,Unidragger.prototype);var isTouch='createTouch' in document;var isTouchmoveScrollCanceled=false;proto._createDrag=function(){this.on('activate',this.bindDrag);this.on('uiChange',this._uiChangeDrag);this.on('childUIPointerDown',this._childUIPointerDownDrag);this.on('deactivate',this.unbindDrag);if(isTouch&&!isTouchmoveScrollCanceled){window.addEventListener('touchmove',function(){});isTouchmoveScrollCanceled=true;}};proto.bindDrag=function(){if(!this.options.draggable||this.isDragBound)return;this.element.classList.add('is-draggable');this.handles=[this.viewport];this.bindHandles();this.isDragBound=true;};proto.unbindDrag=function(){if(!this.isDragBound)return;this.element.classList.remove('is-draggable');this.unbindHandles();delete this.isDragBound;};proto._uiChangeDrag=function(){delete this.isFreeScrolling;};proto._childUIPointerDownDrag=function(event){event.preventDefault();this.pointerDownFocus(event);};var cursorNodes={TEXTAREA:true,INPUT:true,OPTION:true};var clickTypes={radio:true,checkbox:true,button:true,submit:true,image:true,file:true};proto.pointerDown=function(event,pointer){var isCursorInput=cursorNodes[event.target.nodeName]&&!clickTypes[event.target.type];if(isCursorInput){this.isPointerDown=false;delete this.pointerIdentifier;return;}this._dragPointerDown(event,pointer);var focused=document.activeElement;if(focused&&focused.blur&&focused!=this.element&&focused!=document.body)focused.blur();this.pointerDownFocus(event);this.dragX=this.x;this.viewport.classList.add('is-pointer-down');this._bindPostStartEvents(event);this.pointerDownScroll=getScrollPosition();window.addEventListener('scroll',this);this.dispatchEvent('pointerDown',event,[pointer]);};var touchStartEvents={touchstart:true,MSPointerDown:true};var focusNodes={INPUT:true,SELECT:true};proto.pointerDownFocus=function(event){if(!this.options.accessibility||touchStartEvents[event.type]||focusNodes[event.target.nodeName])return;var prevScrollY=window.pageYOffset;this.element.focus();if(window.pageYOffset!=prevScrollY)window.scrollTo(window.pageXOffset,prevScrollY);};proto.canPreventDefaultOnPointerDown=function(event){var isTouchstart=event.type=='touchstart';var targetNodeName=event.target.nodeName;return !isTouchstart&&targetNodeName!='SELECT';};proto.hasDragStarted=function(moveVector){return Math.abs(moveVector.x)>this.options.dragThreshold;};proto.pointerUp=function(event,pointer){delete this.isTouchScrolling;this.viewport.classList.remove('is-pointer-down');this.dispatchEvent('pointerUp',event,[pointer]);this._dragPointerUp(event,pointer);};proto.pointerDone=function(){window.removeEventListener('scroll',this);delete this.pointerDownScroll;};proto.dragStart=function(event,pointer){this.dragStartPosition=this.x;this.startAnimation();window.removeEventListener('scroll',this);this.dispatchEvent('dragStart',event,[pointer]);};proto.pointerMove=function(event,pointer){var moveVector=this._dragPointerMove(event,pointer);this.dispatchEvent('pointerMove',event,[pointer,moveVector]);this._dragMove(event,pointer,moveVector);};proto.dragMove=function(event,pointer,moveVector){event.preventDefault();this.previousDragX=this.dragX;var direction=this.options.rightToLeft?-1:1;var dragX=this.dragStartPosition+moveVector.x*direction;if(!this.options.wrapAround&&this.slides.length){var originBound=Math.max(-this.slides[0].target,this.dragStartPosition);dragX=dragX>originBound?(dragX+originBound)*0.5:dragX;var endBound=Math.min(-this.getLastSlide().target,this.dragStartPosition);dragX=dragX<endBound?(dragX+endBound)*0.5:dragX;}this.dragX=dragX;this.dragMoveTime=new Date();this.dispatchEvent('dragMove',event,[pointer,moveVector]);};proto.dragEnd=function(event,pointer){if(this.options.freeScroll)this.isFreeScrolling=true;var index=this.dragEndRestingSelect();if(this.options.freeScroll&&!this.options.wrapAround){var restingX=this.getRestingPosition();this.isFreeScrolling=-restingX>this.slides[0].target&&-restingX<this.getLastSlide().target;}else if(!this.options.freeScroll&&index==this.selectedIndex)index+=this.dragEndBoostSelect();delete this.previousDragX;this.isDragSelect=this.options.wrapAround;this.select(index);delete this.isDragSelect;this.dispatchEvent('dragEnd',event,[pointer]);};proto.dragEndRestingSelect=function(){var restingX=this.getRestingPosition();var distance=Math.abs(this.getSlideDistance(-restingX,this.selectedIndex));var positiveResting=this._getClosestResting(restingX,distance,1);var negativeResting=this._getClosestResting(restingX,distance,-1);var index=positiveResting.distance<negativeResting.distance?positiveResting.index:negativeResting.index;return index;};proto._getClosestResting=function(restingX,distance,increment){var index=this.selectedIndex;var minDistance=Infinity;var condition=this.options.contain&&!this.options.wrapAround?function(d,md){return d<=md;}:function(d,md){return d<md;};while(condition(distance,minDistance)){index+=increment;minDistance=distance;distance=this.getSlideDistance(-restingX,index);if(distance===null)break;distance=Math.abs(distance);}return{distance:minDistance,index:index-increment};};proto.getSlideDistance=function(x,index){var len=this.slides.length;var isWrapAround=this.options.wrapAround&&len>1;var slideIndex=isWrapAround?utils.modulo(index,len):index;var slide=this.slides[slideIndex];if(!slide)return null;var wrap=isWrapAround?this.slideableWidth*Math.floor(index/len):0;return x-(slide.target+wrap);};proto.dragEndBoostSelect=function(){if(this.previousDragX===undefined||!this.dragMoveTime||new Date()-this.dragMoveTime>100)return 0;var distance=this.getSlideDistance(-this.dragX,this.selectedIndex);var delta=this.previousDragX-this.dragX;if(distance>0&&delta>0)return 1;else if(distance<0&&delta<0)return -1;return 0;};proto.staticClick=function(event,pointer){var clickedCell=this.getParentCell(event.target);var cellElem=clickedCell&&clickedCell.element;var cellIndex=clickedCell&&this.cells.indexOf(clickedCell);this.dispatchEvent('staticClick',event,[pointer,cellElem,cellIndex]);};proto.onscroll=function(){var scroll=getScrollPosition();var scrollMoveX=this.pointerDownScroll.x-scroll.x;var scrollMoveY=this.pointerDownScroll.y-scroll.y;if(Math.abs(scrollMoveX)>3||Math.abs(scrollMoveY)>3)this._pointerDone();};function getScrollPosition(){return{x:window.pageXOffset,y:window.pageYOffset};}return Flickity;}));(function(window,factory){if(typeof define=='function'&&define.amd)define('tap-listener/tap-listener',['unipointer/unipointer'],function(Unipointer){return factory(window,Unipointer);});else if(typeof module=='object'&&module.exports)module.exports=factory(window,require('unipointer'));else window.TapListener=factory(window,window.Unipointer);}(window,function factory(window,Unipointer){function TapListener(elem){this.bindTap(elem);}var proto=TapListener.prototype=Object.create(Unipointer.prototype);proto.bindTap=function(elem){if(!elem)return;this.unbindTap();this.tapElement=elem;this._bindStartEvent(elem,true);};proto.unbindTap=function(){if(!this.tapElement)return;this._bindStartEvent(this.tapElement,true);delete this.tapElement;};proto.pointerUp=function(event,pointer){if(this.isIgnoringMouseUp&&event.type=='mouseup')return;var pointerPoint=Unipointer.getPointerPoint(pointer);var boundingRect=this.tapElement.getBoundingClientRect();var scrollX=window.pageXOffset;var scrollY=window.pageYOffset;var isInside=pointerPoint.x>=boundingRect.left+scrollX&&pointerPoint.x<=boundingRect.right+scrollX&&pointerPoint.y>=boundingRect.top+scrollY&&pointerPoint.y<=boundingRect.bottom+scrollY;if(isInside)this.emitEvent('tap',[event,pointer]);if(event.type!='mouseup'){this.isIgnoringMouseUp=true;var _this=this;setTimeout(function(){delete _this.isIgnoringMouseUp;},400);}};proto.destroy=function(){this.pointerDone();this.unbindTap();};return TapListener;}));(function(window,factory){if(typeof define=='function'&&define.amd)define('flickity/js/prev-next-button',['./flickity','tap-listener/tap-listener','fizzy-ui-utils/utils'],function(Flickity,TapListener,utils){return factory(window,Flickity,TapListener,utils);});else if(typeof module=='object'&&module.exports)module.exports=factory(window,require('./flickity'),require('tap-listener'),require('fizzy-ui-utils'));else factory(window,window.Flickity,window.TapListener,window.fizzyUIUtils);}(window,function factory(window,Flickity,TapListener,utils){'use strict';var svgURI='http://www.w3.org/2000/svg';function PrevNextButton(direction,parent){this.direction=direction;this.parent=parent;this._create();}PrevNextButton.prototype=new TapListener();PrevNextButton.prototype._create=function(){this.isEnabled=true;this.isPrevious=this.direction==-1;var leftDirection=this.parent.options.rightToLeft?1:-1;this.isLeft=this.direction==leftDirection;var element=this.element=document.createElement('button');element.className='flickity-prev-next-button';element.className+=this.isPrevious?' previous':' next';element.setAttribute('type','button');this.disable();element.setAttribute('aria-label',this.isPrevious?'previous':'next');var svg=this.createSVG();element.appendChild(svg);this.on('tap',this.onTap);this.parent.on('select',this.update.bind(this));this.on('pointerDown',this.parent.childUIPointerDown.bind(this.parent));};PrevNextButton.prototype.activate=function(){this.bindTap(this.element);this.element.addEventListener('click',this);this.parent.element.appendChild(this.element);};PrevNextButton.prototype.deactivate=function(){this.parent.element.removeChild(this.element);TapListener.prototype.destroy.call(this);this.element.removeEventListener('click',this);};PrevNextButton.prototype.createSVG=function(){var svg=document.createElementNS(svgURI,'svg');svg.setAttribute('viewBox','0 0 100 100');var path=document.createElementNS(svgURI,'path');var pathMovements=getArrowMovements(this.parent.options.arrowShape);path.setAttribute('d',pathMovements);path.setAttribute('class','arrow');if(!this.isLeft)path.setAttribute('transform','translate(100, 100) rotate(180) ');svg.appendChild(path);return svg;};function getArrowMovements(shape){if(typeof shape=='string')return shape;return 'M '+shape.x0+',50'+' L '+shape.x1+','+(shape.y1+50)+' L '+shape.x2+','+(shape.y2+50)+' L '+shape.x3+',50 '+' L '+shape.x2+','+(50-shape.y2)+' L '+shape.x1+','+(50-shape.y1)+' Z';}PrevNextButton.prototype.onTap=function(){if(!this.isEnabled)return;this.parent.uiChange();var method=this.isPrevious?'previous':'next';this.parent[method]();};PrevNextButton.prototype.handleEvent=utils.handleEvent;PrevNextButton.prototype.onclick=function(){var focused=document.activeElement;if(focused&&focused==this.element)this.onTap();};PrevNextButton.prototype.enable=function(){if(this.isEnabled)return;this.element.disabled=false;this.isEnabled=true;};PrevNextButton.prototype.disable=function(){if(!this.isEnabled)return;this.element.disabled=true;this.isEnabled=false;};PrevNextButton.prototype.update=function(){var slides=this.parent.slides;if(this.parent.options.wrapAround&&slides.length>1){this.enable();return;}var lastIndex=slides.length?slides.length-1:0;var boundIndex=this.isPrevious?0:lastIndex;var method=this.parent.selectedIndex==boundIndex?'disable':'enable';this[method]();};PrevNextButton.prototype.destroy=function(){this.deactivate();};utils.extend(Flickity.defaults,{prevNextButtons:true,arrowShape:{x0:10,x1:60,y1:50,x2:70,y2:40,x3:30}});Flickity.createMethods.push('_createPrevNextButtons');var proto=Flickity.prototype;proto._createPrevNextButtons=function(){if(!this.options.prevNextButtons)return;this.prevButton=new PrevNextButton(-1,this);this.nextButton=new PrevNextButton(1,this);this.on('activate',this.activatePrevNextButtons);};proto.activatePrevNextButtons=function(){this.prevButton.activate();this.nextButton.activate();this.on('deactivate',this.deactivatePrevNextButtons);};proto.deactivatePrevNextButtons=function(){this.prevButton.deactivate();this.nextButton.deactivate();this.off('deactivate',this.deactivatePrevNextButtons);};Flickity.PrevNextButton=PrevNextButton;return Flickity;}));(function(window,factory){if(typeof define=='function'&&define.amd)define('flickity/js/page-dots',['./flickity','tap-listener/tap-listener','fizzy-ui-utils/utils'],function(Flickity,TapListener,utils){return factory(window,Flickity,TapListener,utils);});else if(typeof module=='object'&&module.exports)module.exports=factory(window,require('./flickity'),require('tap-listener'),require('fizzy-ui-utils'));else factory(window,window.Flickity,window.TapListener,window.fizzyUIUtils);}(window,function factory(window,Flickity,TapListener,utils){function PageDots(parent){this.parent=parent;this._create();}PageDots.prototype=new TapListener();PageDots.prototype._create=function(){this.holder=document.createElement('ol');this.holder.className='flickity-page-dots';this.dots=[];this.on('tap',this.onTap);this.on('pointerDown',this.parent.childUIPointerDown.bind(this.parent));};PageDots.prototype.activate=function(){this.setDots();this.bindTap(this.holder);this.parent.element.appendChild(this.holder);};PageDots.prototype.deactivate=function(){this.parent.element.removeChild(this.holder);TapListener.prototype.destroy.call(this);};PageDots.prototype.setDots=function(){var delta=this.parent.slides.length-this.dots.length;if(delta>0)this.addDots(delta);else if(delta<0)this.removeDots(-delta);};PageDots.prototype.addDots=function(count){var fragment=document.createDocumentFragment();var newDots=[];while(count){var dot=document.createElement('li');dot.className='dot';fragment.appendChild(dot);newDots.push(dot);count--;}this.holder.appendChild(fragment);this.dots=this.dots.concat(newDots);};PageDots.prototype.removeDots=function(count){var removeDots=this.dots.splice(this.dots.length-count,count);removeDots.forEach(function(dot){this.holder.removeChild(dot);},this);};PageDots.prototype.updateSelected=function(){if(this.selectedDot)this.selectedDot.className='dot';if(!this.dots.length)return;this.selectedDot=this.dots[this.parent.selectedIndex];this.selectedDot.className='dot is-selected';};PageDots.prototype.onTap=function(event){var target=event.target;if(target.nodeName!='LI')return;this.parent.uiChange();var index=this.dots.indexOf(target);this.parent.select(index);};PageDots.prototype.destroy=function(){this.deactivate();};Flickity.PageDots=PageDots;utils.extend(Flickity.defaults,{pageDots:true});Flickity.createMethods.push('_createPageDots');var proto=Flickity.prototype;proto._createPageDots=function(){if(!this.options.pageDots)return;this.pageDots=new PageDots(this);this.on('activate',this.activatePageDots);this.on('select',this.updateSelectedPageDots);this.on('cellChange',this.updatePageDots);this.on('resize',this.updatePageDots);this.on('deactivate',this.deactivatePageDots);};proto.activatePageDots=function(){this.pageDots.activate();};proto.updateSelectedPageDots=function(){this.pageDots.updateSelected();};proto.updatePageDots=function(){this.pageDots.setDots();};proto.deactivatePageDots=function(){this.pageDots.deactivate();};Flickity.PageDots=PageDots;return Flickity;}));(function(window,factory){if(typeof define=='function'&&define.amd)define('flickity/js/player',['ev-emitter/ev-emitter','fizzy-ui-utils/utils','./flickity'],function(EvEmitter,utils,Flickity){return factory(EvEmitter,utils,Flickity);});else if(typeof module=='object'&&module.exports)module.exports=factory(require('ev-emitter'),require('fizzy-ui-utils'),require('./flickity'));else factory(window.EvEmitter,window.fizzyUIUtils,window.Flickity);}(window,function factory(EvEmitter,utils,Flickity){var hiddenProperty,visibilityEvent;if('hidden' in document){hiddenProperty='hidden';visibilityEvent='visibilitychange';}else if('webkitHidden' in document){hiddenProperty='webkitHidden';visibilityEvent='webkitvisibilitychange';}function Player(parent){this.parent=parent;this.state='stopped';if(visibilityEvent){this.onVisibilityChange=function(){this.visibilityChange();}.bind(this);this.onVisibilityPlay=function(){this.visibilityPlay();}.bind(this);}}Player.prototype=Object.create(EvEmitter.prototype);Player.prototype.play=function(){if(this.state=='playing')return;var isPageHidden=document[hiddenProperty];if(visibilityEvent&&isPageHidden){document.addEventListener(visibilityEvent,this.onVisibilityPlay);return;}this.state='playing';if(visibilityEvent)document.addEventListener(visibilityEvent,this.onVisibilityChange);this.tick();};Player.prototype.tick=function(){if(this.state!='playing')return;var time=this.parent.options.autoPlay;time=typeof time=='number'?time:3000;var _this=this;this.clear();this.timeout=setTimeout(function(){_this.parent.next(true);_this.tick();},time);};Player.prototype.stop=function(){this.state='stopped';this.clear();if(visibilityEvent)document.removeEventListener(visibilityEvent,this.onVisibilityChange);};Player.prototype.clear=function(){clearTimeout(this.timeout);};Player.prototype.pause=function(){if(this.state=='playing'){this.state='paused';this.clear();}};Player.prototype.unpause=function(){if(this.state=='paused')this.play();};Player.prototype.visibilityChange=function(){var isPageHidden=document[hiddenProperty];this[isPageHidden?'pause':'unpause']();};Player.prototype.visibilityPlay=function(){this.play();document.removeEventListener(visibilityEvent,this.onVisibilityPlay);};utils.extend(Flickity.defaults,{pauseAutoPlayOnHover:true});Flickity.createMethods.push('_createPlayer');var proto=Flickity.prototype;proto._createPlayer=function(){this.player=new Player(this);this.on('activate',this.activatePlayer);this.on('uiChange',this.stopPlayer);this.on('pointerDown',this.stopPlayer);this.on('deactivate',this.deactivatePlayer);};proto.activatePlayer=function(){if(!this.options.autoPlay)return;this.player.play();this.element.addEventListener('mouseenter',this);};proto.playPlayer=function(){this.player.play();};proto.stopPlayer=function(){this.player.stop();};proto.pausePlayer=function(){this.player.pause();};proto.unpausePlayer=function(){this.player.unpause();};proto.deactivatePlayer=function(){this.player.stop();this.element.removeEventListener('mouseenter',this);};proto.onmouseenter=function(){if(!this.options.pauseAutoPlayOnHover)return;this.player.pause();this.element.addEventListener('mouseleave',this);};proto.onmouseleave=function(){this.player.unpause();this.element.removeEventListener('mouseleave',this);};Flickity.Player=Player;return Flickity;}));(function(window,factory){if(typeof define=='function'&&define.amd)define('flickity/js/add-remove-cell',['./flickity','fizzy-ui-utils/utils'],function(Flickity,utils){return factory(window,Flickity,utils);});else if(typeof module=='object'&&module.exports)module.exports=factory(window,require('./flickity'),require('fizzy-ui-utils'));else factory(window,window.Flickity,window.fizzyUIUtils);}(window,function factory(window,Flickity,utils){function getCellsFragment(cells){var fragment=document.createDocumentFragment();cells.forEach(function(cell){fragment.appendChild(cell.element);});return fragment;}var proto=Flickity.prototype;proto.insert=function(elems,index){var cells=this._makeCells(elems);if(!cells||!cells.length)return;var len=this.cells.length;index=index===undefined?len:index;var fragment=getCellsFragment(cells);var isAppend=index==len;if(isAppend)this.slider.appendChild(fragment);else{var insertCellElement=this.cells[index].element;this.slider.insertBefore(fragment,insertCellElement);}if(index===0)this.cells=cells.concat(this.cells);else if(isAppend)this.cells=this.cells.concat(cells);else{var endCells=this.cells.splice(index,len-index);this.cells=this.cells.concat(cells).concat(endCells);}this._sizeCells(cells);var selectedIndexDelta=index>this.selectedIndex?0:cells.length;this._cellAddedRemoved(index,selectedIndexDelta);};proto.append=function(elems){this.insert(elems,this.cells.length);};proto.prepend=function(elems){this.insert(elems,0);};proto.remove=function(elems){var cells=this.getCells(elems);var selectedIndexDelta=0;var len=cells.length;var i,cell;for(i=0;i<len;i++){cell=cells[i];var wasBefore=this.cells.indexOf(cell)<this.selectedIndex;selectedIndexDelta-=wasBefore?1:0;}for(i=0;i<len;i++){cell=cells[i];cell.remove();utils.removeFrom(this.cells,cell);}if(cells.length)this._cellAddedRemoved(0,selectedIndexDelta);};proto._cellAddedRemoved=function(changedCellIndex,selectedIndexDelta){selectedIndexDelta=selectedIndexDelta||0;this.selectedIndex+=selectedIndexDelta;this.selectedIndex=Math.max(0,Math.min(this.slides.length-1,this.selectedIndex));this.cellChange(changedCellIndex,true);this.emitEvent('cellAddedRemoved',[changedCellIndex,selectedIndexDelta]);};proto.cellSizeChange=function(elem){var cell=this.getCell(elem);if(!cell)return;cell.getSize();var index=this.cells.indexOf(cell);this.cellChange(index);};proto.cellChange=function(changedCellIndex,isPositioningSlider){var prevSlideableWidth=this.slideableWidth;this._positionCells(changedCellIndex);this._getWrapShiftCells();this.setGallerySize();this.emitEvent('cellChange',[changedCellIndex]);if(this.options.freeScroll){var deltaX=prevSlideableWidth-this.slideableWidth;this.x+=deltaX*this.cellAlign;this.positionSlider();}else{if(isPositioningSlider)this.positionSliderAtSelected();this.select(this.selectedIndex);}};return Flickity;}));(function(window,factory){if(typeof define=='function'&&define.amd)define('flickity/js/lazyload',['./flickity','fizzy-ui-utils/utils'],function(Flickity,utils){return factory(window,Flickity,utils);});else if(typeof module=='object'&&module.exports)module.exports=factory(window,require('./flickity'),require('fizzy-ui-utils'));else factory(window,window.Flickity,window.fizzyUIUtils);}(window,function factory(window,Flickity,utils){'use strict';Flickity.createMethods.push('_createLazyload');var proto=Flickity.prototype;proto._createLazyload=function(){this.on('select',this.lazyLoad);};proto.lazyLoad=function(){var lazyLoad=this.options.lazyLoad;if(!lazyLoad)return;var adjCount=typeof lazyLoad=='number'?lazyLoad:0;var cellElems=this.getAdjacentCellElements(adjCount);var lazyImages=[];cellElems.forEach(function(cellElem){var lazyCellImages=getCellLazyImages(cellElem);lazyImages=lazyImages.concat(lazyCellImages);});lazyImages.forEach(function(img){new LazyLoader(img,this);},this);};function getCellLazyImages(cellElem){if(cellElem.nodeName=='IMG'&&cellElem.getAttribute('data-flickity-lazyload'))return [cellElem];var imgs=cellElem.querySelectorAll('img[data-flickity-lazyload]');return utils.makeArray(imgs);}function LazyLoader(img,flickity){this.img=img;this.flickity=flickity;this.load();}LazyLoader.prototype.handleEvent=utils.handleEvent;LazyLoader.prototype.load=function(){this.img.addEventListener('load',this);this.img.addEventListener('error',this);this.img.src=this.img.getAttribute('data-flickity-lazyload');this.img.removeAttribute('data-flickity-lazyload');};LazyLoader.prototype.onload=function(event){this.complete(event,'flickity-lazyloaded');};LazyLoader.prototype.onerror=function(event){this.complete(event,'flickity-lazyerror');};LazyLoader.prototype.complete=function(event,className){this.img.removeEventListener('load',this);this.img.removeEventListener('error',this);var cell=this.flickity.getParentCell(this.img);var cellElem=cell&&cell.element;this.flickity.cellSizeChange(cellElem);this.img.classList.add(className);this.flickity.dispatchEvent('lazyLoad',event,cellElem);};Flickity.LazyLoader=LazyLoader;return Flickity;}));(function(window,factory){if(typeof define=='function'&&define.amd)define('flickity/js/index',['./flickity','./drag','./prev-next-button','./page-dots','./player','./add-remove-cell','./lazyload'],factory);else if(typeof module=='object'&&module.exports)module.exports=factory(require('./flickity'),require('./drag'),require('./prev-next-button'),require('./page-dots'),require('./player'),require('./add-remove-cell'),require('./lazyload'));})(window,function factory(Flickity){return Flickity;});(function(window,factory){if(typeof define=='function'&&define.amd)define('flickity-as-nav-for/as-nav-for',['flickity/js/index','fizzy-ui-utils/utils'],factory);else if(typeof module=='object'&&module.exports)module.exports=factory(require('flickity'),require('fizzy-ui-utils'));else window.Flickity=factory(window.Flickity,window.fizzyUIUtils);}(window,function factory(Flickity,utils){Flickity.createMethods.push('_createAsNavFor');var proto=Flickity.prototype;proto._createAsNavFor=function(){this.on('activate',this.activateAsNavFor);this.on('deactivate',this.deactivateAsNavFor);this.on('destroy',this.destroyAsNavFor);var asNavForOption=this.options.asNavFor;if(!asNavForOption)return;var _this=this;setTimeout(function initNavCompanion(){_this.setNavCompanion(asNavForOption);});};proto.setNavCompanion=function(elem){elem=utils.getQueryElement(elem);var companion=Flickity.data(elem);if(!companion||companion==this)return;this.navCompanion=companion;var _this=this;this.onNavCompanionSelect=function(){_this.navCompanionSelect();};companion.on('select',this.onNavCompanionSelect);this.on('staticClick',this.onNavStaticClick);this.navCompanionSelect(true);};proto.navCompanionSelect=function(isInstant){if(!this.navCompanion)return;var selectedCell=this.navCompanion.selectedCells[0];var firstIndex=this.navCompanion.cells.indexOf(selectedCell);var lastIndex=firstIndex+this.navCompanion.selectedCells.length-1;var selectIndex=Math.floor(lerp(firstIndex,lastIndex,this.navCompanion.cellAlign));this.selectCell(selectIndex,false,isInstant);this.removeNavSelectedElements();if(selectIndex>=this.cells.length)return;var selectedCells=this.cells.slice(firstIndex,lastIndex+1);this.navSelectedElements=selectedCells.map(function(cell){return cell.element;});this.changeNavSelectedClass('add');};function lerp(a,b,t){return(b-a)*t+a;}proto.changeNavSelectedClass=function(method){this.navSelectedElements.forEach(function(navElem){navElem.classList[method]('is-nav-selected');});};proto.activateAsNavFor=function(){this.navCompanionSelect(true);};proto.removeNavSelectedElements=function(){if(!this.navSelectedElements)return;this.changeNavSelectedClass('remove');delete this.navSelectedElements;};proto.onNavStaticClick=function(event,pointer,cellElement,cellIndex){if(typeof cellIndex=='number')this.navCompanion.selectCell(cellIndex);};proto.deactivateAsNavFor=function(){this.removeNavSelectedElements();};proto.destroyAsNavFor=function(){if(!this.navCompanion)return;this.navCompanion.off('select',this.onNavCompanionSelect);this.off('staticClick',this.onNavStaticClick);delete this.navCompanion;};return Flickity;}));(function(window,factory){'use strict';if(typeof define=='function'&&define.amd)define('imagesloaded/imagesloaded',['ev-emitter/ev-emitter'],function(EvEmitter){return factory(window,EvEmitter);});else if(typeof module=='object'&&module.exports)module.exports=factory(window,require('ev-emitter'));else window.imagesLoaded=factory(window,window.EvEmitter);})(window,function factory(window,EvEmitter){var $=window.jQuery;var console=window.console;function extend(a,b){for(var prop in b)a[prop]=b[prop];return a;}function makeArray(obj){var ary=[];if(Array.isArray(obj))ary=obj;else if(typeof obj.length=='number')for(var i=0;i<obj.length;i++)ary.push(obj[i]);else ary.push(obj);return ary;}function ImagesLoaded(elem,options,onAlways){if(!(this instanceof ImagesLoaded))return new ImagesLoaded(elem,options,onAlways);if(typeof elem=='string')elem=document.querySelectorAll(elem);this.elements=makeArray(elem);this.options=extend({},this.options);if(typeof options=='function')onAlways=options;else extend(this.options,options);if(onAlways)this.on('always',onAlways);this.getImages();if($)this.jqDeferred=new $.Deferred();setTimeout(function(){this.check();}.bind(this));}ImagesLoaded.prototype=Object.create(EvEmitter.prototype);ImagesLoaded.prototype.options={};ImagesLoaded.prototype.getImages=function(){this.images=[];this.elements.forEach(this.addElementImages,this);};ImagesLoaded.prototype.addElementImages=function(elem){if(elem.nodeName=='IMG')this.addImage(elem);if(this.options.background===true)this.addElementBackgroundImages(elem);var nodeType=elem.nodeType;if(!nodeType||!elementNodeTypes[nodeType])return;var childImgs=elem.querySelectorAll('img');for(var i=0;i<childImgs.length;i++){var img=childImgs[i];this.addImage(img);}if(typeof this.options.background=='string'){var children=elem.querySelectorAll(this.options.background);for(i=0;i<children.length;i++){var child=children[i];this.addElementBackgroundImages(child);}}};var elementNodeTypes={1:true,9:true,11:true};ImagesLoaded.prototype.addElementBackgroundImages=function(elem){var style=getComputedStyle(elem);if(!style)return;var reURL=/url\((['"])?(.*?)\1\)/gi;var matches=reURL.exec(style.backgroundImage);while(matches!==null){var url=matches&&matches[2];if(url)this.addBackground(url,elem);matches=reURL.exec(style.backgroundImage);}};ImagesLoaded.prototype.addImage=function(img){var loadingImage=new LoadingImage(img);this.images.push(loadingImage);};ImagesLoaded.prototype.addBackground=function(url,elem){var background=new Background(url,elem);this.images.push(background);};ImagesLoaded.prototype.check=function(){var _this=this;this.progressedCount=0;this.hasAnyBroken=false;if(!this.images.length){this.complete();return;}function onProgress(image,elem,message){setTimeout(function(){_this.progress(image,elem,message);});}this.images.forEach(function(loadingImage){loadingImage.once('progress',onProgress);loadingImage.check();});};ImagesLoaded.prototype.progress=function(image,elem,message){this.progressedCount++;this.hasAnyBroken=this.hasAnyBroken||!image.isLoaded;this.emitEvent('progress',[this,image,elem]);if(this.jqDeferred&&this.jqDeferred.notify)this.jqDeferred.notify(this,image);if(this.progressedCount==this.images.length)this.complete();if(this.options.debug&&console)console.log('progress: '+message,image,elem);};ImagesLoaded.prototype.complete=function(){var eventName=this.hasAnyBroken?'fail':'done';this.isComplete=true;this.emitEvent(eventName,[this]);this.emitEvent('always',[this]);if(this.jqDeferred){var jqMethod=this.hasAnyBroken?'reject':'resolve';this.jqDeferred[jqMethod](this);}};function LoadingImage(img){this.img=img;}LoadingImage.prototype=Object.create(EvEmitter.prototype);LoadingImage.prototype.check=function(){var isComplete=this.getIsImageComplete();if(isComplete){this.confirm(this.img.naturalWidth!==0,'naturalWidth');return;}this.proxyImage=new Image();this.proxyImage.addEventListener('load',this);this.proxyImage.addEventListener('error',this);this.img.addEventListener('load',this);this.img.addEventListener('error',this);this.proxyImage.src=this.img.src;};LoadingImage.prototype.getIsImageComplete=function(){return this.img.complete&&this.img.naturalWidth!==undefined;};LoadingImage.prototype.confirm=function(isLoaded,message){this.isLoaded=isLoaded;this.emitEvent('progress',[this,this.img,message]);};LoadingImage.prototype.handleEvent=function(event){var method='on'+event.type;if(this[method])this[method](event);};LoadingImage.prototype.onload=function(){this.confirm(true,'onload');this.unbindEvents();};LoadingImage.prototype.onerror=function(){this.confirm(false,'onerror');this.unbindEvents();};LoadingImage.prototype.unbindEvents=function(){this.proxyImage.removeEventListener('load',this);this.proxyImage.removeEventListener('error',this);this.img.removeEventListener('load',this);this.img.removeEventListener('error',this);};function Background(url,element){this.url=url;this.element=element;this.img=new Image();}Background.prototype=Object.create(LoadingImage.prototype);Background.prototype.check=function(){this.img.addEventListener('load',this);this.img.addEventListener('error',this);this.img.src=this.url;var isComplete=this.getIsImageComplete();if(isComplete){this.confirm(this.img.naturalWidth!==0,'naturalWidth');this.unbindEvents();}};Background.prototype.unbindEvents=function(){this.img.removeEventListener('load',this);this.img.removeEventListener('error',this);};Background.prototype.confirm=function(isLoaded,message){this.isLoaded=isLoaded;this.emitEvent('progress',[this,this.element,message]);};ImagesLoaded.makeJQueryPlugin=function(jQuery){jQuery=jQuery||window.jQuery;if(!jQuery)return;$=jQuery;$.fn.imagesLoaded=function(options,callback){var instance=new ImagesLoaded(this,options,callback);return instance.jqDeferred.promise($(this));};};ImagesLoaded.makeJQueryPlugin();return ImagesLoaded;});(function(window,factory){if(typeof define=='function'&&define.amd)define(['flickity/js/index','imagesloaded/imagesloaded'],function(Flickity,imagesLoaded){return factory(window,Flickity,imagesLoaded);});else if(typeof module=='object'&&module.exports)module.exports=factory(window,require('flickity'),require('imagesloaded'));else window.Flickity=factory(window,window.Flickity,window.imagesLoaded);}(window,function factory(window,Flickity,imagesLoaded){'use strict';Flickity.createMethods.push('_createImagesLoaded');var proto=Flickity.prototype;proto._createImagesLoaded=function(){this.on('activate',this.imagesLoaded);};proto.imagesLoaded=function(){if(!this.options.imagesLoaded)return;var _this=this;function onImagesLoadedProgress(instance,image){var cell=_this.getParentCell(image.img);_this.cellSizeChange(cell&&cell.element);if(!_this.options.freeScroll)_this.positionSliderAtSelected();}imagesLoaded(this.slider).on('progress',onImagesLoadedProgress);};return Flickity;}));
var pymChild=null;var isMobile=Modernizr.touchevents;var BASE_URL=null;var cards=null;var cardTimer=null;var cardsTitle=null;var cardsSubtitle=null;var listItems=null;var navigationBtns=null;var flkty=null;var allData=[];var completion=0;var AP_MONTHS=['Jan.','Feb.','March','April','May','June','July','Aug.','Sept.','Oct.','Nov.','Dec.'];var touchStartX=null;var touchStartY=null;var parser=new DOMParser();var onWindowLoaded=function(){BASE_URL=buildBaseURL();navigationBtns=document.querySelectorAll('.navigation .arrows');pymChild=new pym.Child({renderCallback:render});pymChild.onMessage('on-screen',function(bucket){ANALYTICS.trackEvent('on-screen',bucket);});pymChild.onMessage('navigate-to-card',navigateToCard);pymChild.onMessage('scroll-to-category',scrollToCategory);navigationBtns.forEach(function(btn){btn.addEventListener('click',onNavigationClick);});decideEmbedType();};var decideEmbedType=function(){if(getParameterByName('category'))buildCategoryCards(getParameterByName('category'));else{var ids=getParameterByName('ids').split(',');for(var i=0;i<ids.length;i++)var card=getCardData(ids,ids[i]);cardsTitle=getParameterByName('title');cardsSubtitle=getParameterByName('subtitle');cardTimer=setInterval(function(){var defined=allData.filter(function(value){return value!==undefined;}).length;if(defined===ids.length)buildCards(allData);},100);}};var buildCategoryCards=function(category){var resourceLink=document.querySelector('.full-resource');if(resourceLink)resourceLink.classList.add('hidden');document.querySelector('body').classList.add('collapse');var request=new XMLHttpRequest();request.open('GET',BASE_URL+'data/'+category+'.json',true);request.onload=function(){if(request.status>=200&&request.status<400){var data=JSON.parse(request.responseText);data=data.sort(function(a,b){if(a.title<b.title)return -1;else if(a.title>b.title)return 1;else return 0;});document.querySelector('body').classList.add('category');document.querySelector('body').setAttribute('id','category-'+category);if(data.length>1)buildDropdown(data);buildCards(data);pymChild.sendMessage('child-ready');}else console.error('The request returned response '+request.status);};request.onerror=function(){console.error('There was an error with the request');};request.send();};var buildBaseURL=function(){if(document.location.hostname==='apps.npr.org')return 'https://apps.npr.org/cardbuilder/';else return 'https://apps.npr.org/cardbuilder/';};var getCardData=function(ids,id){var idIndex=ids.indexOf(id);var request=new XMLHttpRequest();request.open('GET',BASE_URL+'data/'+id+'.json',true);request.onload=function(){if(request.status>=200&&request.status<400){var data=JSON.parse(request.responseText);allData[idIndex]=data;}else console.error('The request returned response '+request.status);};request.onerror=function(){console.error('There was an error with the request');};request.send();};var buildCards=function(data){clearTimeout(cardTimer);buildSidebar(data,parser);for(var i=0;i<data.length;i++)buildCard(data[i],parser);document.querySelector('.total').innerHTML=data.length;flkty=new Flickity('.cards',{cellSelector:'.card-main',draggable:isMobile,pageDots:false,setGallerySize:false,cellAlign:'center',adaptiveHeight:true,prevNextButtons:false,friction:1.5,selectedAttraction:0.2,dragThreshold:30});flkty.on('select',onFlickitySelect);cards=document.querySelectorAll('.card-main');for(var i=0;i<cards.length;i++)cards[i].addEventListener('click',onCardClick);pymChild.sendHeight();document.addEventListener('touchstart',onTouchStart);document.addEventListener('touchmove',onTouchMove);};var buildDropdown=function(data){var dropdown=document.querySelector('#dropdown').innerHTML;var dropdownTemplate=_.template(dropdown);var dropdownCompiled=parser.parseFromString(dropdownTemplate({cards:data}),'text/html').querySelector('.dropdown');document.querySelector('.card-wrapper').prepend(dropdownCompiled);document.querySelector('.dropdown').addEventListener('change',onDropdownSelect);};var buildSidebar=function(data,parser){var cardSidebar=document.querySelector('#card-sidebar').innerHTML;var cardSidebarTemplate=_.template(cardSidebar);var cardSidebarCompiled=parser.parseFromString(cardSidebarTemplate({title:cardsTitle,subtitle:cardsSubtitle}),'text/html').querySelector('.card-sidebar');document.querySelector('.card-wrapper').prepend(cardSidebarCompiled);};var buildCard=function(data,parser){if(data.image)data.image=BASE_URL+'static/'+data.image;var categorySlug=classify(data.category);var date=new Date(data.last_updated);var dateStr=AP_MONTHS[date.getMonth()]+' '+date.getDate()+', '+date.getFullYear();data.last_updated=dateStr;data.category_slug=categorySlug;var cardMain=document.querySelector('#card-main').innerHTML;var cardMainTemplate=_.template(cardMain);var cardMainCompiled=parser.parseFromString(cardMainTemplate({item:data}),'text/html').querySelector('.card-main');document.querySelector('.cards').append(cardMainCompiled);};var onFlickitySelect=function(){var i=this.selectedIndex;document.querySelector('.current').innerHTML=i+1;if(i===0)document.querySelector('.arrow-prev').classList.add('disabled');else document.querySelector('.arrow-prev').classList.remove('disabled');if(i===this.cells.length-1)document.querySelector('.arrow-next').classList.add('disabled');else document.querySelector('.arrow-next').classList.remove('disabled');for(var j=0;j<cards.length;j++)if(j<i){cards[j].classList.add('before');cards[j].classList.remove('after');}else if(j>i){cards[j].classList.add('after');cards[j].classList.remove('before');}else{cards[j].classList.remove('before');cards[j].classList.remove('after');}ANALYTICS.trackEvent('card-viewed',i.toString());trackCompletion(i,this.cells.length);};var onDropdownSelect=function(e){flkty.select(e.target.selectedIndex);};var trackCompletion=function(index,length){how_far=(index+1)/length;if(how_far>=completion+0.25){completion=how_far-(how_far%0.25);if(completion===0.25)ANALYTICS.trackEvent('completion','0.25');else if(completion===0.5)ANALYTICS.trackEvent('completion','0.5');else if(completion===0.75)ANALYTICS.trackEvent('completion','0.75');else if(completion===1)ANALYTICS.trackEvent('completion','1');}};var onNavigationClick=function(){if(this.querySelector('.prev')){flkty.previous();ANALYTICS.trackEvent('nav-used','prev');}else{flkty.next();ANALYTICS.trackEvent('nav-used','next');}};var onCardClick=function(){if(this.classList.contains('is-selected'))return;if([].indexOf.call(cards,this)>flkty.selectedIndex){flkty.next();ANALYTICS.trackEvent('card-nav-used','next');}else{flkty.previous();ANALYTICS.trackEvent('card-nav-used','prev');}};var onTouchStart=function(e){touchStartX=e.touches[0].clientX;touchStartY=e.touches[0].clientY;};var onTouchMove=function(e){var lastTouchX=e.changedTouches[0].clientX;var lastTouchY=e.changedTouches[0].clientY;var diffX=Math.abs(touchStartX-lastTouchX);var diffY=Math.abs(touchStartY-lastTouchY);if(diffY<20&&diffX>20)e.preventDefault();else return true;};var scrollToCategory=function(category){pymChild.scrollParentToChildEl('category-'+category);};var navigateToCard=function(card){flkty.cells.forEach(function(cell){var el=cell.element;if(el.getAttribute('data-slug')===card){var index=flkty.cells.indexOf(cell);flkty.select(index);}});};var render=function(containerWidth){if(pymChild)pymChild.sendHeight();};window.onload=onWindowLoaded;